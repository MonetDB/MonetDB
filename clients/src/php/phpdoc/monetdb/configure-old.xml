<?xml version="1.0" encoding="iso-8859-1"?>

<!--
The contents of this file are subject to the MonetDB Public License
Version 1.1 (the "License"); you may not use this file except in
compliance with the License. You may obtain a copy of the License at
http://monetdb.cwi.nl/Legal/MonetDBLicense-1.1.html

Software distributed under the License is distributed on an "AS IS"
basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
License for the specific language governing rights and limitations
under the License.

The Original Code is the MonetDB Database System.

The Initial Developer of the Original Code is CWI.
Portions created by CWI are Copyright (C) 1997-2008 CWI.
All Rights Reserved.
-->

<!-- $Revision$ -->
<section id="monetdb.installation">
 &reftitle.install;
 <para id="monetdb.configure">
  To enable MonetDB access in PHP you need to follow few steps.
  <itemizedlist>
   <listitem>
    <para>
	 You need to have MonetDB installed. 
	 You can find MonetDB source and binary distributions at 
	 <ulink url="&url.monetdb;">&url.monetdb;</ulink>.
	 After successfull installation <literal>MONET_PREFIX</literal>
	 variable, useful in further steps, should be defined.
	 Additionally, you should declare <literal>MONET_SRC</literal>
	 variable, pointing to location where you installed MonetDB source.
	</para>
   </listitem>
   <listitem>
    <para>
     You need to obtain PHP source distribution. 
	 For details please read section <link linkend="installation">Installation</link>.
	 In next steps we assume PHP source is installed in directory pointed
	 by <literal>PHP_SRC</literal> variable.
    </para>
   </listitem>
   <listitem>
    <para>
	 Since MonetDB PHP module is not a part of official PHP distribution,
	 you need to add MonetDB to PHP source tree, e.g. by running:
	 <programlisting role="shell">
	  <![CDATA[
cd $PHP_SRC
ln -s $MONET_SRC/src/mapi/clients/php/Cimpl ext/monetdb
./buildconf --force
	  ]]>
	 </programlisting>
	</para>
   </listitem>
   <listitem>
    <para>
	 Now you can configure PHP to include MonetDB API module.
	 You have two choices here:
	 <itemizedlist>
	  <listitem>
	   <para>
	    MonetDB API statically linked into PHP binary. 
		To do it, you just configure PHP in a following way:
         <programlisting role="shell">
	      <![CDATA[
./configure --with-monetdb
          ]]>
         </programlisting>
	   </para>
	  </listitem>
	  <listitem>
	   <para>
         MonetDB API compiled as dynamically loaded module. 
		 To do it, you need to configure PHP in a following way:
         <programlisting role="shell">
	      <![CDATA[
./configure --with-monetdb=shared
          ]]>
         </programlisting>
	   </para>
	  </listitem>
	 </itemizedlist>
	 <note>
	  <para>
	   Since it is possible that MonetDB include files and libraries are not
	   in the default path, you should sometimes specify MonetDB path explicitly.
	   To do it you either need to have <literal>MONET_PREFIX</literal> environment variable
	   specified, or call <literal>configure</literal> with proper information, e.g.:
         <programlisting role="shell">
	      <![CDATA[
# for statically linked MonetDB module
./configure --with-monetdb=path/to/your/monet/installation
# for dynamically loaded MonetDB module
./configure --with-monetdb=shared,path/to/your/monet/installation
	  ]]>
         </programlisting>
	  </para>
	 </note>
     <note>
      <para>
       Please bear in mind, that on most Linux machines PHP is already installed.
       To avoid conflicts with other version, you may force PHP to use different
       installation and configuration directories, e.g. by running:
       <programlisting role="shell">
        <![CDATA[
./configure --with-monetdb=shared --prefix=$PHP_INSTALL --with-config-file-path=$PHP_INSTALL/etc
        ]]>
       </programlisting>
      </para>
     </note>
	 
	</para>
   </listitem>
   <listitem>
    <para>
	 If configuration succeeds you can compile and install PHP by running:
	 <programlisting role="shell">
	  <![CDATA[
make clean
make
make install
	  ]]>
	 </programlisting>
	</para>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  After successfull compilation and installation you can check if MonetDB 
  PHP module is running by executing e.g.:
	 <programlisting role="shell">
	  <![CDATA[
$PHP_INSTALL/bin/php < $MONET_SRC/src/mapi/clients/php/Cimpl/monetdb.php > test.html
mozilla test.html
	  ]]>
	  </programlisting>
 </para>
</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
