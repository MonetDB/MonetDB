# DO NOT EDIT THIS FILE -- MAINTAINED AUTOMATICALLY
# This file contains past ChangeLog entries

* Mon Dec 20 2010 Fabian Groffen <fabian@cwi.nl> - 11.1.1-20110317
- Allow use of globs with all commands that accept database names as
  their parameters

* Mon Sep 20 2010 Fabian Groffen <fabian@cwi.nl> - 11.1.1-20110317
- merovingian has been renamed into monetdbd.  Internally, monetdbd keeps
  referring to merovingian for e.g. settings and logfiles.  Merovingian
  has been renamed to make the process more recognisable as part of the
  MonetDB suite.

* Wed Nov 17 2010 Sjoerd Mullender <sjoerd@acm.org> - 2.40.3-20101215
- Fixed off-by-one error when abbreviating long database names in the
  monetdb status command.

* Thu Oct 21 2010 Fabian Groffen <fabian@cwi.nl> - 2.40.1-20101029
- Report a stopped and locked database as under maintenance, instead of
  without connections, bug #2685

* Fri Jul 16 2010 Arjen de Rijke <arjen.de.rijke@cwi.nl> - 2.40.1-20101029
- Add readonly property for databases to monetdb and merovingian.

* Mon Jul 26 2010 Fabian Groffen <fabian@cwi.nl> - 2.38.5-20100823
- On installs with (very) long prefixes, the UNIX domain sockets could get
  truncated, causing merovingian to become unavailable to monetdb and mclient.
  Similarly, a fall back to a regular TCP socket for mapi connections is
  used for forked mservers in this case.

* Wed Jul 21 2010 Fabian Groffen <fabian@cwi.nl> - 2.38.5-20100823
- Really shutdown when an argument to merovingian was given, instead of
  ending up in some inconsistent state.  This solves all weird behaviour
  observed in bug #2628.
- Report MonetDB release on --version flags and in the logs.

* Fri Jul 16 2010 Fabian Groffen <fabian@cwi.nl> - 2.38.5-20100823
- Remove references to master/slave settings, since replication isn't yet
  fully implemented in Jun2010 branch.

* Thu Jul 01 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010-SP1
- When a startup failure causes a shutdown, make sure we log this
  incident in the logfile, together with a message that the deamon was
  shut down due to this fatal condition.

* Tue Jun 01 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Fixed an issue where Merovingian's strict umask was applied too early
  causing files to be inaccessible.  Now the .merovingian_control socket
  file is accessible to both user and group of the merovingian process,
  and the .mapi_socket file is accessible to everyone like a TCP socket
  is.  Fixes bug #2550.

* Tue Jun 01 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Properly clean up .merovingian_control file in dbfarm.

* Tue Jun 01 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Removed database pre-starting (mis-)feature, any argument to
  merovingian now yields in a version message followed by a server exit.

* Wed Apr 07 2010 Fabian Groffen <fabian@cwi.nl> - Feb2010-SP2
- Fix logic in buffer enlargments, causing bug #2982104.  These bug
  became visible when receiving more data from merovingian(1) than would
  fit in the originally allocated buffers.  This could happen quite
  easily for instance with `monetdb status` when there are many
  databases.

* Wed Apr 07 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Sort output returned by discover, status and get commands based on url
  or dbname.

* Mon Mar 29 2010 Fabian Groffen <fabian@cwi.nl> - Feb2010-SP2
- Fixed an issue where merovingian(1) would lock up or crash when
  destroying a database failed.

* Wed Mar 24 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Implemented UNIX domain socket listener for Merovingian, found as
  mapi_socket in the dbfarm.  Client connections can be made over it
  like normal TCP connections.

* Wed Mar 17 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- When a proxy connection is made to a local UNIX domain socket, pass
  on the filedescriptor instead of proxying.

* Tue Mar 16 2010 Fabian Groffen <fabian@cwi.nl> - Feb2010-SP1
- Enlarged buffer to avoid incomplete output being sent to monetdb(1),
  causing commands like status and get to fail on certain
  configurations.

* Tue Mar 16 2010 Fabian Groffen <fabian@cwi.nl> - Jun2010
- Use mserver5's UNIX domain socket support when Merovingian is supposed
  to proxy the connection to the database.

* Fri Mar 05 2010 Fabian Groffen <fabian@cwi.nl> - Feb2010-SP1
- Avoid running over the allocated buffer space resulting in crashes
  when a client connects which IP address cannot be resolved into a
  hostname, bug #2964247

* Thu Jan 21 2010 Fabian Groffen <fabian@cwi.nl> - Nov2009-SP2
- Changed wording of monetdb status -l for last crash to indicate the time
  reported is not the crash time, but the time the server was started which
  eventually crashed, bug #2900355

* Wed Jan 13 2010 Fabian Groffen <fabian@cwi.nl> - Nov2009-SP2
- Strip trailing newlines from the control channel password, bug #2931392

* Fri Dec 11 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009-SP1
- The master property of a database now contains an id that is used to
  identify the master to the slaves. The id can be given using monetdb set, or
  one is generated when no id is supplied (when just setting it to 'yes')

* Mon Oct 26 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Fix bug that caused monetdb status to list an incorrect uptime in
  cases where the uptime was longer than 7 days.

* Thu Oct 08 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Add optpipe setting to control the SQL optimiser pipeline, useful for
  experimentation per database

* Thu Oct 08 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Export the URI the database is reachable from remotely to the database via
  merovingian_uri GDKenvironment setting. This can be used by applications
  inside the database that need to give a pointer back to themselves.

* Wed Sep 30 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Add slave property for databases

* Fri Sep 25 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Implemented global -q option to monetdb to suppress status messages when
  performing commands, Feature Request #2855846.

* Fri Sep 25 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Improved globbing to support escapes, such that the literal asterisk symbol
  can be matched using \*

* Fri Sep 25 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Remote controllable merovingians now announce their controlport. These
  control entries show up in monetdb discover output marked with an asterisk.

* Wed Sep 23 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Implemented Feature Request #2830754. monetdb can now control a remote
  merovingian using the -h -p and -P global options to monetdb. The password
  used is stored at the merovingian site in the .merovingian_pass file in the
  controlled dbfarm.

* Fri Sep 18 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- monetdb now requires merovingian to be running to perform any
  operation

* Wed Sep 09 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- No longer announce databases that are under maintenance, this allows them to
  be pulled out of the cluster easily

* Fri Sep 04 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Add master property of boolean value that translates into
  replication_master for mserver5 to trigger storing replication logs

* Tue Aug 25 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009-SP1
- Properly recognise mero_port option from config file, bug #2844202

* Thu Aug 20 2009 Fabian Groffen <fabian@cwi.nl> - Nov2009
- Always put created databases under maintenance, they have to be explicitly
  released after creating and performing the initialisation steps by the DBA

* Fri Jul 31 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- monetdb destroy now allows to remove a database under maintenance. This way
  an administrator can prevent users connecting to the database and hence
  starting it on demand, which in turn prevents removal of the database.

* Tue Jul 21 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Implemented sharing of databases with tags. Using these tags, extra
  information is available on a remote merovingian to select a database during
  connect. For this, a client can now connect to a database using a glob
  expression, which is matched on the database plus tag.  When multiple
  databases match such expression, a load-balancing technique is
  applied.

* Thu Jul 02 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Allow expression matches for 'monetdb status' command.

* Wed Jul 01 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Allow an expression to be used to match against the list of discovered
  databases for future convenience.

* Fri Jun 19 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Allow setting the name of a database (a.k.a. renaming it), doing all the
  logic to keep the logdir aligned in case it's absolute.

* Fri Jun 19 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Increase the default mero_exittimeout from 7 to 60 seconds.

* Fri Jun 19 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Restrict database names created by monetdb to the pattern [A-Za-z0-9-_]+.

* Wed Jun 17 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Implemented full per-database property support.  monetdb now can
  manage the following per-database properties: logdir, forward, shared,
  nthreads.  Feature Request #1837591.

* Tue Jun 16 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Fixed bug where destroying multiple databases without -f would abort after
  the first database.

* Mon Jun 08 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Avoid multiple questions by merging them into a single confirmation for the
  destroy command.  This accidently fixes a bug where a response such as 'yes'
  would abort the next database removal.

* Thu Jun 04 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Implemented a configurable port for the neighbour discovery service. This
  also allows to entirely disable neighbour discovery by setting
  mero_discoveryport to 0.  Feature request #2800964

* Tue Jun 02 2009 Fabian Groffen <fabian@cwi.nl> - Aug2009
- Implemented dynamic width of monetdb status output. If a database name is
  wider than 14 chars, the name column is made wider as long as the
  terminal window allows.  If a column cannot be made any wider this
  way, it is abbreviated as before.

* Fri May 15 2009 Fabian Groffen <fabian@cwi.nl> - May2009
- Implemented Feature Request #2705670.  Reopen logfiles when SIGHUP is
  received.

* Wed May 13 2009 Fabian Groffen <fabian@cwi.nl> - May2009
- Implemented Feature Request #2782776. All logged messages are now prefixed
  with a timestamp.

* Tue Apr 21 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP2
- Instead of sending SIGTERM and immediately returning, call the
  terminateProcess function such that we nicely wait for the process to have
  died, and eventually send a SIGKILL if that fails. Fixes bug #2747661

* Mon Mar 30 2009 Sjoerd Mullender <sjoerd@cwi.nl> - Feb2009-SP2
- If the logdir argument to logger_create is a relative path name, the
  logdir will be located inside the dbfarm/dbname directory.  If it is
  an absolute path name, that path is used.  Fixed monetdb destroy with
  regard to this new behaviour.

* Mon Mar 23 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Remove the pid file upon shutdown, fixes bug #2705666

* Mon Mar 02 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Small cosmetic fix not to overflow the uptime in monetdb status display

* Mon Feb 23 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Fix hang on Linux when shutting down. select() calls are not interrupted on
  Linux, so make sure they time out. Fixes bug #2623838

* Thu Feb 19 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Fixed crash of merovingian when a to be started database terminates
  immediately after startup (such as when it crashes)

* Mon Feb 16 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Fixed crash when using monetdb stop on a non-started database.  Bug #2605105

* Mon Feb 16 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Protect shared linked list structures from being accessed and/or modified by
  two or more threads concurrently. This resolves random crashes. Fixes bug

* Mon Feb 02 2009 Fabian Groffen <fabian@cwi.nl> - Feb2009-SP1
- Create logfiles when they do not exist.  Bug #2556973

* Sun Dec 28 2008 Fabian Groffen <fabian@cwi.nl> - Feb2009
- Properly handle SIGHUP, such that merovingian does not silently terminate

* Sun Dec 28 2008 Fabian Groffen <fabian@cwi.nl> - Feb2009
- Switched internally to select() calls instead of non-blocking IO loops. This
  reduces the CPU usage in idlestate considerably.

* Mon Dec 08 2008 Fabian Groffen <fabian@cwi.nl> - Feb2009
- Fix manpage header

