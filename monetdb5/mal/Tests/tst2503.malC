# The prototypical factory construct

factory user.random(seed:int):int;
	i:= seed;
barrier always:= true;
	i:= 125 *i;
	i:= i % 32767;
	yield i;
	redo always;
exit always;
	return random:= 0;
end;

r1:= user.random(1);
io.print(r1);
r2:= user.random(34);
io.print(r2);
r2:= user.random(2);
io.print(r2);
r2:= user.random(2);
io.print(r2);
r2:= user.random(2);
io.print(r2);
r2:= user.random(2);
io.print(r2);
factories.shutdown("user","random");
