# The first reference case for fast cracking
include microbenchmark;

tuples:= 1024*1024; #67108864= 64* 1024*1024
b:= microbenchmark.uniform(0@0,tuples,tuples);

size:= bat.getBatSize(b);
io.printf("# tuples %d\n",tuples);
io.printf("# BAT size %d\n",size);

crackers.new(b);

total:=0:lng;
n:= 25;
barrier (go,i):= (true,0);
    low:int:= mmath.rand();
	low := low % tuples;
	hgh:int:= mmath.rand();
	hgh := hgh % tuples;
	redo go := low>hgh;
t0:= alarm.usec();
	crackers.crack(b,low);
t1:= alarm.usec();
	time:= t1 - t0;
	total:= total+time;
	io.print(low,hgh,time);
    redo (go,i):= language.nextElement(1,n);
exit (go,i);

m:= calc.lng(n);
f:= total/m;
io.print(f);
crackers.destroy(b);

