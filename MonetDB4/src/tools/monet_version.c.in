/* -*-C-*- */
/*
 * The contents of this file are subject to the MonetDB Public License
 * Version 1.1 (the "License"); you may not use this file except in
 * compliance with the License. You may obtain a copy of the License at
 * http://monetdb.cwi.nl/Legal/MonetDBLicense-1.1.html
 *
 * Software distributed under the License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
 * License for the specific language governing rights and limitations
 * under the License.
 *
 * The Original Code is the MonetDB Database System.
 *
 * The Initial Developer of the Original Code is CWI.
 * Portions created by CWI are Copyright (C) 1997-July 2008 CWI.
 * Copyright August 2008-2010 MonetDB B.V.
 * All Rights Reserved.
 */

#include "monetdb4_config.h"
#include "monet.h"
#include <stdio.h>
#include "monet_version.h"
#ifdef HAVE_LIBPCRE
#include <pcre.h>
#endif
#ifdef HAVE_OPENSSL
#include <openssl/opensslv.h>
#endif
#ifdef HAVE_LIBXML2
#include <libxml/xmlversion.h>
#endif

void
monetdb4_version(void)
{
	printf("MonetDB server v" VERSION " (" SZFMT "-bit), "
			"based on kernel v%s (" SZFMT "-bit oids)\n",
			(size_t) (sizeof(ptr) * 8), GDKversion(),
			(size_t) (sizeof(oid) * 8));
	printf("Copyright (c) 1993-July 2008 CWI\nCopyright (c) August 2008-2009 MonetDB B.V., all rights reserved\n");
	printf("Visit http://monetdb.cwi.nl/ for further information\n");
	printf("Configured for prefix: " MONETDB4_PREFIX "\n");
	printf("Libraries:\n");
#ifdef HAVE_LIBPCRE
	{
		char pcreversion[] = "@pcreversion@";
		printf("  libpcre: %s", pcre_version());
		if (*pcreversion)
			printf(" (%s)", pcreversion);
		printf("\n");
	}
#endif
#ifdef HAVE_OPENSSL
	{
		char opensslversion[] = "@opensslversion@";
		printf("  openssl: %s", OPENSSL_VERSION_TEXT);
		if (*opensslversion)
			printf(" (%s)", opensslversion);
		printf("\n");
	}
#endif
	printf("Compiled by: %s\n", "@builtby@");
	printf("Compilation: %s\n", "@compilercall@");
#ifdef MONETDB_STATIC
	printf("Linking    : %s (static)\n", "@linkercall@");
#else
	printf("Linking    : %s\n", "@linkercall@");
#endif
}
