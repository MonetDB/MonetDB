#
# This test generates an array in the same way the RAM frontend would.
# The array is filled with color values, to produce a pretty picture
# in the SpatialView visualization.
#
# it requires the color, array, and, mmath modules to be loaded:

module("color");module("array");module("mmath");

{

var width := 40;
var height := 30;
var x_axis := grid(height,width,1,0);
var y_axis := grid(1,height,width,0);

var r := [abs]([int]([*]([sin]([/]([dbl](x_axis),dbl(width)/(2.0LL*M_PI))),255.0LL)));
var g := [abs]([int]([*]([sin]([/]([dbl](y_axis),dbl(height)/(2.0LL*M_PI))),255.0LL)));
var b := [abs]([int]([*]([sin]([/]([dbl]([+](x_axis,y_axis)),dbl(width+height)/(2.0LL*M_PI))),255.0LL)));

var values := [rgb](r,g,b);

# Note this should be 'table', not 'print', but at present monet doesnt
# produce column types in the table output, hence we revert back to the
# plain print funciton.

print(x_axis,y_axis,values);

}

drop("color");
drop("array");
drop("mmath");
