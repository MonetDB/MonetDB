@echo off

if not "%1"=="" goto skip
call %0 -r
goto end

:skip

setlocal

set builddir=@XMONETDB_BUILD@
set srcdir=@XMONETDB_SOURCE@

set PATH=%builddir%\src\testing;%builddir%\src\tools;%builddir%\src\mapi\clients\C;%builddir%\src\mapi\clients\python;%PATH%
set PYTHONPATH=%builddir%\src\testing;%srcdir%\src\testing;%builddir%\src\common;%srcdir%\src\mapi\clients\python
set PATH=%builddir%\src\common;%builddir%\src\gdk;%builddir%\src\mapi\clients\C;%builddir%\src\modules\plain\stream;%builddir%\src\monet;%PATH%

REM execute Mapprove.py in the source directory
pushd %srcdir%

call python "%builddir%\src\testing\Mapprove.py" "--config=%builddir%\conf\MonetDB.conf" "--TSTTRGBASE=%builddir%" %*

popd
endlocal

:end
