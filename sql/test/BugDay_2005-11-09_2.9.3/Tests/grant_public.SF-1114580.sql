START TRANSACTION;
CREATE TABLE test1114580 (id INT, rest varchar(100));
COMMIT;

-- create a general grant
START TRANSACTION;
GRANT SELECT ON test1114580 TO PUBLIC;
GRANT INSERT ON test1114580 TO PUBLIC;
GRANT UPDATE(id) ON test1114580 TO PUBLIC;
COMMIT;

START TRANSACTION;
REVOKE INSERT ON test1114580 FROM PUBLIC;
REVOKE UPDATE(id) ON test1114580 FROM PUBLIC;
REVOKE GRANT OPTION FOR SELECT ON test1114580 FROM PUBLIC;
COMMIT;

START TRANSACTION;
GRANT SELECT ON test1114580 TO PUBLIC;
GRANT INSERT ON test1114580 TO PUBLIC;
GRANT UPDATE(id) ON test1114580 TO PUBLIC;
COMMIT;

-- fails: no column dumdum
START TRANSACTION;
GRANT UPDATE(dumdum) ON test1114580 TO PUBLIC;
ROLLBACK;

-- allowed: just doing the same thing a few times
START TRANSACTION;
GRANT INSERT ON test1114580 TO PUBLIC;
GRANT INSERT ON test1114580 TO PUBLIC;
GRANT INSERT ON test1114580 TO PUBLIC;
REVOKE SELECT ON test1114580 FROM  PUBLIC;
REVOKE SELECT ON test1114580 FROM  PUBLIC;
ROLLBACK;
-- fails: syntax is wrong
START TRANSACTION;
REVOKE SELECT ON test1114580 TO PUBLIC;
ROLLBACK;

START TRANSACTION;
DROP TABLE test1114580;
COMMIT;
