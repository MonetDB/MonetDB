@' The contents of this file are subject to the MonetDB Public License
@' Version 1.1 (the "License"); you may not use this file except in
@' compliance with the License. You may obtain a copy of the License at
@' http://monetdb.cwi.nl/Legal/MonetDBLicense-1.1.html
@'
@' Software distributed under the License is distributed on an "AS IS"
@' basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
@' License for the specific language governing rights and limitations
@' under the License.
@'
@' The Original Code is the MonetDB Database System.
@'
@' The Initial Developer of the Original Code is CWI.
@' Portions created by CWI are Copyright (C) 1997-2007 CWI.
@' All Rights Reserved.

@f list
@a Niels Nes

@h
#ifndef _LIST_H_
#define _LIST_H_

#include "ListIterator.h"

class List {
      public:

	List(int size) {
		_size = size;
		_next = 0;
		_l = new void *[size];
	}
	~List() {
		delete[]_l;
	}

	void insert(void *obj) {
		if (_next >= _size)
			resize();
		_l[_next++] = obj;
	}

	void insert(List * l) {
		for (int i = 0; i < l->_next; i++) {
			insert(l->_l[i]);
		}
	}

	void *operator[] (int i) {
		return _l[i];
	}

	int count() const {
		return _next;
	}
	ListIterator *iterator() {
		return new ListIterator(_l, _next);
	}


      private:
	void **_l;
	int _next;
	int _size;

	void resize() {
		_size *= 2;
		void **buf = new void *[_size];

		for (int i = 0; i < _next; i++) {
			buf[i] = _l[i];
		}
		delete[]_l;
		_l = buf;
	}
};

#endif // _LIST_H_
