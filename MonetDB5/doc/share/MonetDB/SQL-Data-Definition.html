<html lang="en">
<head>
<title>SQL Data Definition - Untitled</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Untitled">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="SQL-Language.html#SQL-Language" title="SQL Language">
<link rel="prev" href="SQL-Preface.html#SQL-Preface" title="SQL Preface">
<link rel="next" href="SQL-Data-Types.html#SQL-Data-Types" title="SQL Data Types">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the MonetDB Version 5.0 Reference Manual

Last updated: June 5, 2006

     Copyright (C) 2000-2006 CWI

     Permission is granted to make and distribute verbatim
     copies of this manual provided the copyright notice and
     this permission notice are preserved on all copies.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
body { 
    margin: 0px;
    padding: 0px;
}
a,a:visited {
	color: #336633;
}
a:hover {
	color: #003300;
}

p,body {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    text-align: justify;
    font-size: 10pt;
}

h1 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 14pt;
    font-style: bold;
	text-align: left;
}

td,th {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10pt;
}

div.banner {
	padding: 5px 0px 0px 5px; 
}

div.banner img {
	border: 0px;
	text-decoration: none;
}

div.topmenu {
	margin-top: -20px;
	margin-left: 166px;
	padding: 8px 5px 5px 5px;
	font-size: 8pt;
	background-color: #A9CC99;
}

div.topmenu-bottom {
	margin-top: -4px;
	margin-left: 166px;
	padding: 2px 5px;
	background-color: #BCD2ED; 
}

div.topmenu a {
	padding: 4px 5px 1px 5px;
	text-decoration: none; 
}

div.topmenu a:focus {
	background-color: #6699CC; 
}

div.topmenu a:hover {
	background-color: #5662A0; 
}

/*
span.current {
}
*/

div.topmenu span.current a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.current a:hover {
	color: #336633;
	background-color: #BCD2ED; 
}

/*
span.submenu {
}
*/

div.topmenu span.submenu a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.submenu a:hover {
	background-color: #9FB0DB; 
}

div.topmenu span.button {
	margin: 0px 0px 0px 10px;
}

div.topmenu span.button a {
	padding: 5px 6px 1px 6px;
	color: #333333;
	background-color: #FFAC37;
}

div.topmenu span.button a:hover {
	color: #FFFFFF;
}

div.content {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}

div.header {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}


div.sidebar-a {
	float: left;
	width: 156px;
	padding: 5px;
	font-size: 8pt;
}

div.sidebar-b { 
	float: right;
	width: 146px;
	margin: 0px 0px 0px 5px;
	padding: 5px;
	font-size: 8pt;
}

div.footer-a {
	float: left;
	width: 156px;
	margin: 5px 0px 0px 0px;
	padding: 5px;
	font-size: 7pt;
	background-color: #CBEEBB;
}

div.footer-a a {
	margin: 5px;
	text-decoration: none; 
}

div.footer-b {
	margin: 5px 0px 0px 0px;
	padding: 5px;
	background-color: #A9CC99;
	font-size: 7pt;
}

div.footer-b a {
	margin: 5px;
	padding: 2px 3px;
	text-decoration: none; 
}
div.footer-b a:focus {
	background-color: #6699CC; 
}
div.footer-b a:hover {
	color: #FFFFFF;
	background-color: #5662A0; 
}
div.footer-b img {
	border: 0px;
	vertical-align: bottom;
	text-decoration: none; 
}

div.news {
	border: 1px solid #666699;
	background-color: #E7E7E7; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.news li {
	list-style: square;
}

div.submenu-b {
	border: 1px solid #666699;
	background-color: #CBEEBB;
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu-b a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	color: #000000;
	background-color: #A9CC99;
}

div.submenu-b a:hover {
	background-color: #BCD2ED; 
}

div.submenu-b ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu-b li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu {
	border: 1px solid #666699;
	background-color: #9FB0DB; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	_width: 100%;
}

div.submenu ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu span.submenu a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.submenu a:hover {
	background-color: #A9CC99;
}

div.submenu span.current a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.current a:hover {
	background-color: #CBEEBB;
}

pre.code {
	border: 1px solid Black;
	padding: 4px;
	font-family: monospace;
}
.authors {
	font-size: smaller;
	font-style: italic;
}
--></style>
</head>
<body>
<div class="node">
<p>
<a name="SQL-Data-Definition"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="SQL-Data-Types.html#SQL-Data-Types">SQL Data Types</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="SQL-Preface.html#SQL-Preface">SQL Preface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="SQL-Language.html#SQL-Language">SQL Language</a>
<hr>
</div>

<h4 class="subsection">3.3.2 SQL Data Definition</h4>

<h5 class="subsubsection">3.3.2.1 Create TABLE</h5>

<p>The parser currently supports the full &lt;table scope&gt; specifier, but the
implementation is limited to LOCAL TEMPORARY tables
(ie the tables are only visable in the clients session) and
on COMMIT we 'DROP' these temporaries.

<pre class="verbatim">
The CREATE table statement follows the 2003 syntax, ie 

	CREATE [ &lt;table scope> ] TABLE 
		&lt;table name> 
		&lt;table contents source>
		[ ON COMMIT &lt;table commit action> ROWS ]
		+[ ON COMMIT DROP ]

	&lt;table scope> ::= &lt;global or local> TEMPORARY

	&lt;global or local> ::= GLOBAL | LOCAL

	&lt;table commit action> ::= PRESERVE | DELETE

&lt;table contents source> ::=
		&lt;table element list>
	-|	OF &lt;path-resolved user-defined type name> [ &lt;subtable clause> ] [ &lt;table element list> ]
	-&lt;3.0|	&lt;as subquery clause>

&lt;table element list> ::= ( &lt;table element> [ { , &lt;table element> }... ] )

&lt;table element> ::=
		&lt;column definition>
	|	&lt;table constraint definition>
	|	&lt;like clause>
	-|	&lt;self-referencing column specification>
	|	&lt;column options>

-&lt;self-referencing column specification> ::= REF IS &lt;self-referencing column name> &lt;reference generation>

-&lt;reference generation> ::= SYSTEM GENERATED | USER GENERATED | DERIVED

-&lt;self-referencing column name> ::= &lt;column name>

&lt;column options> ::= &lt;column name> WITH OPTIONS &lt;column option list>

&lt;column option list> ::= [ -&lt;scope clause> ] [ &lt;default clause> ] [ &lt;column constraint definition>... ]

-&lt;subtable clause> ::= UNDER &lt;supertable clause>

-&lt;supertable clause> ::= &lt;supertable name>

-&lt;supertable name> ::= &lt;table name>
</pre>

<h5 class="subsubsection">3.3.2.2 create table like</h5>

<p>It is posible to create a table which looks like an existing table. This
can be done using the create table like statement. Currently there is no
support for additional options. A work around is to use the alter
statement to change options.

<pre class="verbatim">
&lt;like clause> ::= LIKE &lt;table name> [ &lt;like options> ]

-&lt;like options> ::= &lt;identity option> | &lt;column default option>

-&lt;identity option> ::= INCLUDING IDENTITY | EXCLUDING IDENTITY

-&lt;column default option> ::= INCLUDING DEFAULTS | EXCLUDING DEFAULTS
</pre>

<h5 class="subsubsection">3.3.2.3 create table AS subquery</h5>

<p>As of version 3.0 support is added for table construction based on subqueries.

<pre class="verbatim">
-&lt;3.0	&lt;as subquery clause> ::= [ ( &lt;column name list> ) ] AS &lt;subquery> &lt;with or without data>

-&lt;3.0	&lt;with or without data> ::= WITH NO DATA | WITH DATA
</pre>

<h5 class="subsubsection">3.3.2.4 columns</h5>

<pre class="verbatim">
&lt;column definition> ::=
                &lt;column name> [ &lt;data type> | -&lt;domain name> ] [ -&lt;reference scope check> ]
                [ &lt;default clause> | &lt;identity column specification> | -&lt;generation clause> ]
                [ &lt;column constraint definition>... ] [ -&lt;collate clause> ]
</pre>

<h5 class="subsubsection">3.3.2.5 Identity column</h5>

<p>SQL 2003 added identity columns, which are columns for which the values are
coming from a sequenc generator. Besides the SQL 2003 syntax also the
syntax from mysql (auto_increment) and postgress (serial data type) are
supported.

<pre class="verbatim">
&lt;identity column specification> ::=
                GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY
                [ ( &lt;common sequence generator options> ) ]
	+| 	auto_increment

-&lt;generation clause> ::= &lt;generation rule> AS &lt;generation expression>

-&lt;generation rule> ::= GENERATED ALWAYS

-&lt;generation expression> ::= ( &lt;value expression> )
</pre>

<h5 class="subsubsection">3.3.2.6 Default values</h5>

<!-- p -->
<!-- Specify the default for a column, domain, or attribute. -->
<!-- /p -->
<!-- as domain/attribute are currently not support default values are only -->
<!-- important for columns -->
<p>To make insert statements easier a default value can associated with
each column. Besides literal values, temporal and sequence functions
can be used as default value. Value of these functions at insert time will
be used. 
<!-- todo explain that our DEFAULT is more powerfull (like postgress), ie -->
<!-- support any function not just temporal and sequence related -->

<pre class="verbatim">
&lt;default clause> ::= DEFAULT &lt;default option>

&lt;default option> ::=
                &lt;literal>
        |       &lt;datetime value function>
        |       USER
        |       CURRENT_USER
        |       CURRENT_ROLE
        |       SESSION_USER
        |       NULL
	+|	NEXT VALUE FOR &lt;sequence name>
</pre>

   <p>For example an auto increment column can be created using the following
column specification:
	col_name integer default NEXT VALUE FOR sequence_name

<h5 class="subsubsection">3.3.2.7 Column and Table Constraints</h5>

<p>Column and Table constraints are supported. Besides the simple NOT NULL check
also UNIQUE, PRIMARY and FOREIGN keys are supported. The limitation stems from
the missing triggers, ie we currently check constraints directly on insert,
update and delete. The NULL matching on foreign keys is limited to the SIMPLE
MATCH type (NULL values statisfy the constraint). The FULL and PARTIAL MATCH
types are not supported. The referential action is currently limited to
RESTRICT, ie an update fails if a other columns have references to it.

<pre class="verbatim">
&lt;column constraint definition> ::= [ &lt;constraint name definition> ] &lt;column constraint> [ &lt;constraint characteristics> ]

&lt;column constraint> ::=
                NOT NULL
        |       &lt;unique specification>
        |       &lt;references specification>
        -|       &lt;check constraint definition>

@c  we need to update to the new 2003 syntax soon...

&lt;reference scope check> ::= REFERENCES ARE [ NOT ] CHECKED [ ON DELETE &lt;reference scope check action> ]

&lt;reference scope check action> ::= &lt;referential action>

--h3 11.6 &lt;table constraint definition> (p543)
--/h3

--p 
Specify an integrity constraint.
--/p

&lt;table constraint definition> ::= [ &lt;constraint name definition> ] &lt;table constraint> [ &lt;constraint characteristics> ]

&lt;table constraint> ::=
		&lt;unique constraint definition>
	|	&lt;referential constraint definition>
	|	&lt;check constraint definition>


&lt;unique constraint definition> ::=
		&lt;unique specification> ( &lt;unique column list> )
	-|	UNIQUE ( VALUE )

&lt;unique specification> ::= UNIQUE | PRIMARY KEY

&lt;unique column list> ::= &lt;column name list>

--h3 11.8 &lt;referential constraint definition> (p547)
--/h3

--p 
Specify a referential constraint.
--/p

&lt;referential constraint definition> ::= FOREIGN KEY ( &lt;referencing columns> ) &lt;references specification>

&lt;references specification> ::= REFERENCES &lt;referenced table and columns> [ MATCH &lt;match type> ] [ &lt;referential triggered action> ]

&lt;match type> ::= FULL | PARTIAL | SIMPLE

&lt;referencing columns> ::= &lt;reference column list>

&lt;referenced table and columns> ::= &lt;table name> [ ( &lt;reference column list> ) ]

&lt;reference column list> ::= &lt;column name list>

&lt;referential triggered action> ::= &lt;update rule> [ &lt;delete rule> ] | &lt;delete rule> [ &lt;update rule> ]

&lt;update rule> ::= ON UPDATE &lt;referential action>

&lt;delete rule> ::= ON DELETE &lt;referential action>

&lt;referential action> ::= CASCADE | SET NULL | SET DEFAULT | RESTRICT | NO ACTION

&lt;check constraint definition> ::= CHECK ( &lt;search condition> )

@subsubsection ALTER TABLE

&lt;alter table statement> ::= ALTER TABLE &lt;table name> &lt;alter table action>

&lt;alter table action> ::=
		&lt;add column definition>
	|	&lt;alter column definition>
	|	&lt;drop column definition>
	|	&lt;add table constraint definition>
	|	&lt;drop table constraint definition>

@subsubsection ADD column

&lt;add column definition> ::= ADD [ COLUMN ] &lt;column definition>

@subsubsection ALTER column

&lt;alter column definition> ::= ALTER [ COLUMN ] &lt;column name> &lt;alter column action>
&lt;alter column action> ::=
		&lt;set column default clause>
	|	&lt;drop column default clause>
	|	&lt;add column scope clause>
	|	&lt;drop column scope clause>
	|	&lt;alter identity column specification>

&lt;set column default clause> ::= SET &lt;default clause>
&lt;drop column default clause> ::= DROP DEFAULT
-&lt;add column scope clause> ::= ADD &lt;scope clause>
-&lt;drop column scope clause> ::= DROP SCOPE &lt;drop behavior>

&lt;alter identity column specification> ::= &lt;alter identity column option>...

&lt;alter identity column option> ::=
		&lt;alter sequence generator restart option>
	|	SET &lt;basic sequence generator option>

&lt;drop column definition> ::= DROP [ COLUMN ] &lt;column name> &lt;drop behavior>

@subsubsection ADD constraint
&lt;add table constraint definition> ::= ADD &lt;table constraint definition>
&lt;drop table constraint definition> ::= DROP CONSTRAINT &lt;constraint name> &lt;drop behavior>

@subsubsection DROP table
&lt;drop table statement> ::= DROP TABLE &lt;table name> &lt;drop behavior>


</pre>

<h5 class="subsubsection">3.3.2.8 CREATE VIEW</h5>

<p>Regular view specifications are supported. However, recursive views and
referenceable views are not supported. Next to this 2003 feature we support
creating a view on top of a set of bats. In this case the query expression is
replaced by the keyword BATS, and the bats are found based on the
view specification. As this feature requires indepth knowledge of
the system it is only open to the ADMIN_ROLE.

<pre class="verbatim">
&lt;view definition> ::=
                CREATE -[ RECURSIVE ] VIEW &lt;table name> &lt;view specification> AS &lt;view query expression>
                [ WITH -[ &lt;levels clause> ] CHECK OPTION ]

&lt;view query expression> ::=
	&lt;query expression>
 +|	BATS

&lt;view specification> ::= &lt;regular view specification> | &lt;referenceable view specification>

&lt;regular view specification> ::= [ ( &lt;view column list> ) ]

-&lt;referenceable view specification> ::= OF &lt;path-resolved user-defined type name> [ &lt;subview clause> ] [ &lt;view element list> ]

-&lt;subview clause> ::= UNDER &lt;table name>

&lt;view element list> ::= ( &lt;view element> [ { , &lt;view element> }... ] )

&lt;view element> ::= &lt;self-referencing column specification> | &lt;view column option>

&lt;view column option> ::= &lt;column name> WITH OPTIONS -&lt;scope clause>

&lt;levels clause> ::= CASCADED | LOCAL

&lt;view column list> ::= &lt;column name list>

</pre>

   </body></html>

