#turn the debugger on to see details
#mdb.setDebug(19);

b:=bat.new(:int,:int);
bat.insert(b,1,2);
bat.setName(b,"b");
bat.setPersistent(b,true);
transaction.commit();

c:=bat.new(:int,:int);
bat.insert(c,3,4);
bat.setName(c,"a");
bat.setPersistent(c,true);
d:= bat.new(:int,:str);
bat.insert(d,0,"a");
transaction.subcommit(d);

tmp := bat.new(:int,:str);
bat.insert(tmp,0,"a");
da:bat[:int,:int]:= bbp.bind("a");
bat.setPersistent(da,false);
transaction.subcommit(tmp);

bat.setPersistent(b,false);
transaction.commit();
