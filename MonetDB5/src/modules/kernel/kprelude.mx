@-
The Mx macros below are used in many places throughout the code base.

@= getBATdescriptor
	if( (@2= BATdescriptor(*@1)) == NULL ){ @4;
		 throw(MAL, @3, "cannot access descriptor");
   }
@= tstBAT
if( bn== NULL) {*ret= 0;
    throw(MAL, @1, "can not create bat");}

@= resultBAT
    if (BAThvoid(b)) {
        bn = BATnew(TYPE_void, TYPE_@1, BATcount(b));
        BATseqbase(bn, b->hseqbase);
    } else
        bn = BATnew(b->htype, TYPE_@1, BATcount(b));
	if( bn== NULL) {
		@3
		throw(MAL, @2, "can not create bat");
	}
    bn->hsorted = b->hsorted;
    bn->tsorted = b->tsorted;

@= Pseudo
	if (BBPindex("view_@1_@2") <= 0)
		BATname(b, "@2");
	BATroles(b,"@1","@2");
	BATmode(b,TRANSIENT);
	BBPkeepref(b->batCacheid);
	BATfakeCommit(b);
	*ret = b->batCacheid;


