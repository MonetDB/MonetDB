stdout of test 'tst1201` in directory 'src/mal` itself:


# 23:31:29 >  
# 23:31:29 >  Mtimeout -timeout 60 mserver5 "--config=/ufs/mk/monet5/Linux/etc/monetdb5.conf" --debug=10 --set "monet_mod_path=/ufs/mk/monet5//Linux/lib/MonetDB5:/ufs/mk/monet5//Linux/lib/MonetDB5/lib:/ufs/mk/monet5//Linux/lib/MonetDB5/bin" --set "gdk_dbfarm=/ufs/mk/monet5//Linux/var/MonetDB5/dbfarm" --set "sql_logdir=/ufs/mk/monet5//Linux/var/MonetDB5/sql_logs" --set "xquery_logdir=/ufs/mk/monet5//Linux/var/MonetDB5/xquery_logs" --set mapi_port=35239 --set xrpc_port=40860 --set monet_prompt= --trace --dbname=mTests_src_mal  tst1201.mal
# 23:31:29 >  

# MonetDB Server v5.0.0_beta2_1
# Copyright (c) 1993-2007 CWI, all rights reserved
# Compiled for x86_64-redhat-linux-gnu/64bit with 64bit OIDs dynamically linked
# dbname:mTests_src_mal
# Visit http://monetdb.cwi.nl/ for further information
## Mil compiler Version 1.0)
## Copyright (c) 1993-2001, CWI. All rights reserved.
#
## Predefined code segment
##
###line 531 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx"
##module(monettime,alarm);
##
##
##
#lzone:= mtime.timezone("GMT+1");
#mtime.timezone_local(lzone);
###line 535 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx"
### test the various ways to create rules
#	rule_jan:= mtime.rule("1st MON from start of JAN@01:15");
##var rule_jan := mtime.rule("1st MON from start of JAN@01:15");
#	rule_mar:= mtime.rule("first WEDNE on or after march 10@01:15");
##var rule_mar := mtime.rule("first WEDNE on or after march 10@01:15");
#	rule_apr:= mtime.rule("last THU on or before aPr 1@01:15");
##var rule_apr := mtime.rule("last THU on or before aPr 1@01:15");
#	rule_may:= mtime.rule("MAY 26@01:15");
##var rule_may := mtime.rule("MAY 26@01:15");
#	rule_jun:= mtime.rule("2nd TUE from end of june@01:15");
##var rule_jun := mtime.rule("2nd TUE from end of june@01:15");
#	rule_jul:= mtime.rule(7,1,1,75);
##var rule_jul := mtime.rule(7,1,1,75);
#	rule_aug:= mtime.rule(8,-1,1,75);
##var rule_aug := mtime.rule(8,-1,1,75);
#	rule_sep:= mtime.rule(9,-10,3,75);
##var rule_sep := mtime.rule(9,-10,3,75);
#	rule_oct:= mtime.rule(10,31,0,75);
##var rule_oct := mtime.rule(10,31,0,75);
#	rule_nov:= mtime.rule(11,-10,-4,75);
##var rule_nov := mtime.rule(11,-10,-4,75);
### nil rules
#	rule_dec:= mtime.rule(12,-31,0,75);
##var rule_dec := mtime.rule(12,-31,0,75);
#	rule_feb:= mtime.rule("first fRiDaY on or after february 30@01:15");
##var rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15");
## 
#	rule_bat:= bat.new(:str,:zrule,10);
##var rule_bat := bat.new(str,rule,10);
#	bat.insert(rule_bat,"jan",rule_jan);
#	bat.insert(rule_bat,"feb",rule_feb);
#	bat.insert(rule_bat,"mar",rule_mar);
#	bat.insert(rule_bat,"apr",rule_apr);
##rule_bat.bat.insert("jan",rule_jan).insert("feb",rule_feb).insert("mar",rule_mar).insert("apr",rule_apr);
#	bat.insert(rule_bat,"may",rule_may);
#	bat.insert(rule_bat,"jun",rule_jun);
#	bat.insert(rule_bat,"jul",rule_jul);
#	bat.insert(rule_bat,"aug",rule_aug);
##rule_bat.bat.insert("may",rule_may).insert("jun",rule_jun).insert("jul",rule_jul).insert("aug",rule_aug);
#	bat.insert(rule_bat,"sep",rule_sep);
#	bat.insert(rule_bat,"oct",rule_oct);
#	bat.insert(rule_bat,"nov",rule_nov);
#	bat.insert(rule_bat,"dec",rule_dec);
##rule_bat.bat.insert("sep",rule_sep).insert("oct",rule_oct).insert("nov",rule_nov).insert("dec",rule_dec);
##
### test the operations on rules
#	ma_a := bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	na_a:bat[:str,:int] := mal.multiplex("mtime","month",rule_bat);
#	oa_a := bat.setColumn(na_a,"month");
##      [month](rule_bat).bat.setColumn("month"),
#	pa_a:bat[:str,:int] := mal.multiplex("mtime","weekday",rule_bat);
#	qa_a := bat.setColumn(pa_a,"weekday");
##      [weekday](rule_bat).bat.setColumn("weekday"),
#	ra_a:bat[:str,:int] := mal.multiplex("mtime","day",rule_bat);
#	sa_a := bat.setColumn(ra_a,"day");
##      [day](rule_bat).bat.setColumn("day"),
#	ta_a:bat[:str,:int] := mal.multiplex("mtime","minutes",rule_bat);
#	ua_a := bat.setColumn(ta_a,"minutes");
#io.print("rule_bat,na_a,pa_a,ra_a,ta_a");
#	va_a := io.print(rule_bat,na_a,pa_a,ra_a,ta_a);
##      [minutes](rule_bat).bat.setColumn("minutes"));
##
#	bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	xa_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,2001);
#	ya_a := bat.setColumn(xa_a,"2001");
##      [compute](rule_bat, 2001).bat.setColumn("2001"),
#	ab_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,2001);
#	bb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",ab_a);
#	cb_a:bat[:str,:str] := mal.multiplex("mtime","dayname",bb_a);
#	bat.setColumn(cb_a,"2001");
##      [dayname]([dayofweek]([compute](rule_bat, 2001))).bat.setColumn("2001"),
#	eb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1999);
#	bat.setColumn(eb_a,"1999");
##      [compute](rule_bat, 1999).bat.setColumn("1999"),
#	gb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1999);
#	hb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",gb_a);
#	ib_a:bat[:str,:str] := mal.multiplex("mtime","dayname",hb_a);
#	bat.setColumn(ib_a,"1999");
##      [dayname]([dayofweek]([compute](rule_bat, 1999))).bat.setColumn("1999"),
#	kb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1992);
#	bat.setColumn(kb_a,"1992");
##      [compute](rule_bat, 1992).bat.setColumn("1992"),
#	mb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1992);
#	nb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",mb_a);
#	ob_a:bat[:str,:str] := mal.multiplex("mtime","dayname",nb_a);
#	bat.setColumn(ob_a,"1992");
#io.print("rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a");
#	qb_a := io.print(rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a);
##      [dayname]([dayofweek]([compute](rule_bat, 1992))).bat.setColumn("1992"));
##
#	rb_a := bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	sb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1572);
#	tb_a := bat.setColumn(sb_a,"1572");
##      [compute](rule_bat, 1572).bat.setColumn("1572"),
#	ub_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1572);
#	vb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",ub_a);
#	wb_a:bat[:str,:str] := mal.multiplex("mtime","dayname",vb_a);
#	xb_a := bat.setColumn(wb_a,"1572");
##      [dayname]([dayofweek]([compute](rule_bat, 1572))).bat.setColumn("1572"),
#	yb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1);
#	ac_a := bat.setColumn(yb_a,"1");
##      [compute](rule_bat, 1).bat.setColumn("1"),
#	bc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1);
#	cc_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",bc_a);
#	dc_a:bat[:str,:str] := mal.multiplex("mtime","dayname",cc_a);
#	ec_a := bat.setColumn(dc_a,"1");
##      [dayname]([dayofweek]([compute](rule_bat, 1))).bat.setColumn("1"),
#	fc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,-2000);
#	gc_a := bat.setColumn(fc_a,"-2000");
##      [compute](rule_bat, -2000).bat.setColumn("-2000"),
#	hc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,-2000);
#	ic_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",hc_a);
#	jc_a:bat[:str,:str] := mal.multiplex("mtime","dayname",ic_a);
#	kc_a := bat.setColumn(jc_a,"-2000");
#io.print("rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a");
#	lc_a := io.print(rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a);
##      [dayname]([dayofweek]([compute](rule_bat, -2000))).bat.setColumn("-2000"));
##
##
#
function user.main():void;
# Mil compiler Version 1.0) 
# Copyright (c) 1993-2001, CWI. All rights reserved. 
# Predefined code segment 
##line 531 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx" 
#module(monettime,alarm); 
    lzone := mtime.timezone("GMT+1");
    mtime.timezone_local(lzone);
##line 535 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx" 
## test the various ways to create rules 
    rule_jan := mtime.rule("1st MON from start of JAN@01:15");
#var rule_jan := mtime.rule("1st MON from start of JAN@01:15"); 
    rule_mar := mtime.rule("first WEDNE on or after march 10@01:15");
#var rule_mar := mtime.rule("first WEDNE on or after march 10@01:15"); 
    rule_apr := mtime.rule("last THU on or before aPr 1@01:15");
#var rule_apr := mtime.rule("last THU on or before aPr 1@01:15"); 
    rule_may := mtime.rule("MAY 26@01:15");
#var rule_may := mtime.rule("MAY 26@01:15"); 
    rule_jun := mtime.rule("2nd TUE from end of june@01:15");
#var rule_jun := mtime.rule("2nd TUE from end of june@01:15"); 
    rule_jul := mtime.rule(7,1,1,75);
#var rule_jul := mtime.rule(7,1,1,75); 
    rule_aug := mtime.rule(8,-1,1,75);
#var rule_aug := mtime.rule(8,-1,1,75); 
    rule_sep := mtime.rule(9,-10,3,75);
#var rule_sep := mtime.rule(9,-10,3,75); 
    rule_oct := mtime.rule(10,31,0,75);
#var rule_oct := mtime.rule(10,31,0,75); 
    rule_nov := mtime.rule(11,-10,-4,75);
#var rule_nov := mtime.rule(11,-10,-4,75); 
## nil rules 
    rule_dec := mtime.rule(12,-31,0,75);
#var rule_dec := mtime.rule(12,-31,0,75); 
    rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15");
#var rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15"); 
#  
    rule_bat := bat.new(:str,:zrule,10);
#var rule_bat := bat.new(str,rule,10); 
    bat.insert(rule_bat,"jan",rule_jan);
    bat.insert(rule_bat,"feb",rule_feb);
    bat.insert(rule_bat,"mar",rule_mar);
    bat.insert(rule_bat,"apr",rule_apr);
#rule_bat.bat.insert("jan",rule_jan).insert("feb",rule_feb).insert("mar",rule_mar).insert("apr",rule_apr); 
    bat.insert(rule_bat,"may",rule_may);
    bat.insert(rule_bat,"jun",rule_jun);
    bat.insert(rule_bat,"jul",rule_jul);
    bat.insert(rule_bat,"aug",rule_aug);
#rule_bat.bat.insert("may",rule_may).insert("jun",rule_jun).insert("jul",rule_jul).insert("aug",rule_aug); 
    bat.insert(rule_bat,"sep",rule_sep);
    bat.insert(rule_bat,"oct",rule_oct);
    bat.insert(rule_bat,"nov",rule_nov);
    bat.insert(rule_bat,"dec",rule_dec);
#rule_bat.bat.insert("sep",rule_sep).insert("oct",rule_oct).insert("nov",rule_nov).insert("dec",rule_dec); 
## test the operations on rules 
    ma_a := bat.setColumn(rule_bat,"rule");
#io.print(rule_bat.bat.setColumn("rule"), 
    _192 := bat.new(nil:str,nil:int);
barrier (_196,_197,_198) := bat.newIterator(rule_bat);
    _200 := mtime.month(_198);
    bat.insert(_192,_197,_200);
    redo (_196,_197,_198) := bat.hasMoreElements(rule_bat);
exit (_196,_197,_198);
    na_a := _192;
    oa_a := bat.setColumn(na_a,"month");
#      [month](rule_bat).bat.setColumn("month"), 
    _205 := bat.new(nil:str,nil:int);
barrier (_207,_208,_209) := bat.newIterator(rule_bat);
    _211 := mtime.weekday(_209);
    bat.insert(_205,_208,_211);
    redo (_207,_208,_209) := bat.hasMoreElements(rule_bat);
exit (_207,_208,_209);
    pa_a := _205;
    qa_a := bat.setColumn(pa_a,"weekday");
#      [weekday](rule_bat).bat.setColumn("weekday"), 
    _216 := bat.new(nil:str,nil:int);
barrier (_218,_219,_220) := bat.newIterator(rule_bat);
    _222 := mtime.day(_220);
    bat.insert(_216,_219,_222);
    redo (_218,_219,_220) := bat.hasMoreElements(rule_bat);
exit (_218,_219,_220);
    ra_a := _216;
    sa_a := bat.setColumn(ra_a,"day");
#      [day](rule_bat).bat.setColumn("day"), 
    _227 := bat.new(nil:str,nil:int);
barrier (_231,_232,_233) := bat.newIterator(rule_bat);
    _235 := mtime.minutes(_233);
    bat.insert(_227,_232,_235);
    redo (_231,_232,_233) := bat.hasMoreElements(rule_bat);
exit (_231,_232,_233);
    ta_a := _227;
    ua_a := bat.setColumn(ta_a,"minutes");
    io.print("rule_bat,na_a,pa_a,ra_a,ta_a");
    va_a := io.print(rule_bat,na_a,pa_a,ra_a,ta_a);
#      [minutes](rule_bat).bat.setColumn("minutes")); 
    bat.setColumn(rule_bat,"rule");
#io.print(rule_bat.bat.setColumn("rule"), 
    _240 := bat.new(nil:str,nil:date);
barrier (_243,_244,_245) := bat.newIterator(rule_bat);
    _247 := mtime.compute(_245,2001);
    bat.insert(_240,_244,_247);
    redo (_243,_244,_245) := bat.hasMoreElements(rule_bat);
exit (_243,_244,_245);
    xa_a := _240;
    ya_a := bat.setColumn(xa_a,"2001");
#      [compute](rule_bat, 2001).bat.setColumn("2001"), 
    _252 := bat.new(nil:str,nil:date);
barrier (_254,_255,_256) := bat.newIterator(rule_bat);
    _258 := mtime.compute(_256,2001);
    bat.insert(_252,_255,_258);
    redo (_254,_255,_256) := bat.hasMoreElements(rule_bat);
exit (_254,_255,_256);
    ab_a := _252;
    _263 := bat.new(nil:str,nil:int);
barrier (_267,_268,_269) := bat.newIterator(ab_a);
    _271 := mtime.dayofweek(_269);
    bat.insert(_263,_268,_271);
    redo (_267,_268,_269) := bat.hasMoreElements(ab_a);
exit (_267,_268,_269);
    bb_a := _263;
    _276 := bat.new(nil:str,nil:str);
barrier (_278,_279,_280) := bat.newIterator(bb_a);
    _282 := mtime.dayname(_280);
    bat.insert(_276,_279,_282);
    redo (_278,_279,_280) := bat.hasMoreElements(bb_a);
exit (_278,_279,_280);
    cb_a := _276;
    bat.setColumn(cb_a,"2001");
#      [dayname]([dayofweek]([compute](rule_bat, 2001))).bat.setColumn("2001"), 
    _287 := bat.new(nil:str,nil:date);
barrier (_290,_291,_292) := bat.newIterator(rule_bat);
    _294 := mtime.compute(_292,1999);
    bat.insert(_287,_291,_294);
    redo (_290,_291,_292) := bat.hasMoreElements(rule_bat);
exit (_290,_291,_292);
    eb_a := _287;
    bat.setColumn(eb_a,"1999");
#      [compute](rule_bat, 1999).bat.setColumn("1999"), 
    _299 := bat.new(nil:str,nil:date);
barrier (_302,_303,_304) := bat.newIterator(rule_bat);
    _306 := mtime.compute(_304,1999);
    bat.insert(_299,_303,_306);
    redo (_302,_303,_304) := bat.hasMoreElements(rule_bat);
exit (_302,_303,_304);
    gb_a := _299;
    _311 := bat.new(nil:str,nil:int);
barrier (_314,_315,_316) := bat.newIterator(gb_a);
    _318 := mtime.dayofweek(_316);
    bat.insert(_311,_315,_318);
    redo (_314,_315,_316) := bat.hasMoreElements(gb_a);
exit (_314,_315,_316);
    hb_a := _311;
    _323 := bat.new(nil:str,nil:str);
barrier (_325,_326,_327) := bat.newIterator(hb_a);
    _329 := mtime.dayname(_327);
    bat.insert(_323,_326,_329);
    redo (_325,_326,_327) := bat.hasMoreElements(hb_a);
exit (_325,_326,_327);
    ib_a := _323;
    bat.setColumn(ib_a,"1999");
#      [dayname]([dayofweek]([compute](rule_bat, 1999))).bat.setColumn("1999"), 
    _334 := bat.new(nil:str,nil:date);
barrier (_338,_339,_340) := bat.newIterator(rule_bat);
    _342 := mtime.compute(_340,1992);
    bat.insert(_334,_339,_342);
    redo (_338,_339,_340) := bat.hasMoreElements(rule_bat);
exit (_338,_339,_340);
    kb_a := _334;
    bat.setColumn(kb_a,"1992");
#      [compute](rule_bat, 1992).bat.setColumn("1992"), 
    _347 := bat.new(nil:str,nil:date);
barrier (_349,_350,_351) := bat.newIterator(rule_bat);
    _353 := mtime.compute(_351,1992);
    bat.insert(_347,_350,_353);
    redo (_349,_350,_351) := bat.hasMoreElements(rule_bat);
exit (_349,_350,_351);
    mb_a := _347;
    _358 := bat.new(nil:str,nil:int);
barrier (_361,_362,_363) := bat.newIterator(mb_a);
    _365 := mtime.dayofweek(_363);
    bat.insert(_358,_362,_365);
    redo (_361,_362,_363) := bat.hasMoreElements(mb_a);
exit (_361,_362,_363);
    nb_a := _358;
    _370 := bat.new(nil:str,nil:str);
barrier (_373,_374,_375) := bat.newIterator(nb_a);
    _377 := mtime.dayname(_375);
    bat.insert(_370,_374,_377);
    redo (_373,_374,_375) := bat.hasMoreElements(nb_a);
exit (_373,_374,_375);
    ob_a := _370;
    bat.setColumn(ob_a,"1992");
    io.print("rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a");
    qb_a := io.print(rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a);
#      [dayname]([dayofweek]([compute](rule_bat, 1992))).bat.setColumn("1992")); 
    rb_a := bat.setColumn(rule_bat,"rule");
#io.print(rule_bat.bat.setColumn("rule"), 
    _382 := bat.new(nil:str,nil:date);
barrier (_385,_386,_387) := bat.newIterator(rule_bat);
    _389 := mtime.compute(_387,1572);
    bat.insert(_382,_386,_389);
    redo (_385,_386,_387) := bat.hasMoreElements(rule_bat);
exit (_385,_386,_387);
    sb_a := _382;
    tb_a := bat.setColumn(sb_a,"1572");
#      [compute](rule_bat, 1572).bat.setColumn("1572"), 
    _394 := bat.new(nil:str,nil:date);
barrier (_396,_397,_398) := bat.newIterator(rule_bat);
    _400 := mtime.compute(_398,1572);
    bat.insert(_394,_397,_400);
    redo (_396,_397,_398) := bat.hasMoreElements(rule_bat);
exit (_396,_397,_398);
    ub_a := _394;
    _405 := bat.new(nil:str,nil:int);
barrier (_409,_410,_411) := bat.newIterator(ub_a);
    _413 := mtime.dayofweek(_411);
    bat.insert(_405,_410,_413);
    redo (_409,_410,_411) := bat.hasMoreElements(ub_a);
exit (_409,_410,_411);
    vb_a := _405;
    _418 := bat.new(nil:str,nil:str);
barrier (_420,_421,_422) := bat.newIterator(vb_a);
    _424 := mtime.dayname(_422);
    bat.insert(_418,_421,_424);
    redo (_420,_421,_422) := bat.hasMoreElements(vb_a);
exit (_420,_421,_422);
    wb_a := _418;
    xb_a := bat.setColumn(wb_a,"1572");
#      [dayname]([dayofweek]([compute](rule_bat, 1572))).bat.setColumn("1572"), 
    _429 := bat.new(nil:str,nil:date);
barrier (_432,_433,_434) := bat.newIterator(rule_bat);
    _436 := mtime.compute(_434,1);
    bat.insert(_429,_433,_436);
    redo (_432,_433,_434) := bat.hasMoreElements(rule_bat);
exit (_432,_433,_434);
    yb_a := _429;
    ac_a := bat.setColumn(yb_a,"1");
#      [compute](rule_bat, 1).bat.setColumn("1"), 
    _441 := bat.new(nil:str,nil:date);
barrier (_444,_445,_446) := bat.newIterator(rule_bat);
    _448 := mtime.compute(_446,1);
    bat.insert(_441,_445,_448);
    redo (_444,_445,_446) := bat.hasMoreElements(rule_bat);
exit (_444,_445,_446);
    bc_a := _441;
    _453 := bat.new(nil:str,nil:int);
barrier (_456,_457,_458) := bat.newIterator(bc_a);
    _460 := mtime.dayofweek(_458);
    bat.insert(_453,_457,_460);
    redo (_456,_457,_458) := bat.hasMoreElements(bc_a);
exit (_456,_457,_458);
    cc_a := _453;
    _465 := bat.new(nil:str,nil:str);
barrier (_467,_468,_469) := bat.newIterator(cc_a);
    _471 := mtime.dayname(_469);
    bat.insert(_465,_468,_471);
    redo (_467,_468,_469) := bat.hasMoreElements(cc_a);
exit (_467,_468,_469);
    dc_a := _465;
    ec_a := bat.setColumn(dc_a,"1");
#      [dayname]([dayofweek]([compute](rule_bat, 1))).bat.setColumn("1"), 
    _476 := bat.new(nil:str,nil:date);
barrier (_480,_481,_482) := bat.newIterator(rule_bat);
    _484 := mtime.compute(_482,-2000);
    bat.insert(_476,_481,_484);
    redo (_480,_481,_482) := bat.hasMoreElements(rule_bat);
exit (_480,_481,_482);
    fc_a := _476;
    gc_a := bat.setColumn(fc_a,"-2000");
#      [compute](rule_bat, -2000).bat.setColumn("-2000"), 
    _489 := bat.new(nil:str,nil:date);
barrier (_491,_492,_493) := bat.newIterator(rule_bat);
    _495 := mtime.compute(_493,-2000);
    bat.insert(_489,_492,_495);
    redo (_491,_492,_493) := bat.hasMoreElements(rule_bat);
exit (_491,_492,_493);
    hc_a := _489;
    _500 := bat.new(nil:str,nil:int);
barrier (_503,_504,_505) := bat.newIterator(hc_a);
    _507 := mtime.dayofweek(_505);
    bat.insert(_500,_504,_507);
    redo (_503,_504,_505) := bat.hasMoreElements(hc_a);
exit (_503,_504,_505);
    ic_a := _500;
    _512 := bat.new(nil:str,nil:str);
barrier (_515,_516,_517) := bat.newIterator(ic_a);
    _519 := mtime.dayname(_517);
    bat.insert(_512,_516,_519);
    redo (_515,_516,_517) := bat.hasMoreElements(ic_a);
exit (_515,_516,_517);
    jc_a := _512;
    kc_a := bat.setColumn(jc_a,"-2000");
    io.print("rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a");
    lc_a := io.print(rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a);
#      [dayname]([dayofweek]([compute](rule_bat, -2000))).bat.setColumn("-2000")); 
end main;
[ "rule_bat,na_a,pa_a,ra_a,ta_a" ]
#---------------------------------------------------------------------------------------------------------#
# h	rule						month	weekday		day	minutes		  # name
# str	zrule						int	int		int	int		  # type
#---------------------------------------------------------------------------------------------------------#
[ "jan",  first monday from start of january@01:15,	  1,	  2,		  1,	  75		  ]
[ "feb",  nil,						  nil,	  nil,		  nil,	  nil		  ]
[ "mar",  first wednesday on or after march 10@01:15,	  3,	  -4,		  10,	  75		  ]
[ "apr",  last thursday on or before april 1@01:15,	  4,	  -5,		  -1,	  75		  ]
[ "may",  may 26@01:15,					  5,	  0,		  26,	  75		  ]
[ "jun",  second tuesday from end of june@01:15,	  6,	  3,		  -2,	  75		  ]
[ "jul",  first sunday from start of july@01:15,	  7,	  1,		  1,	  75		  ]
[ "aug",  first sunday from end of august@01:15,	  8,	  1,		  -1,	  75		  ]
[ "sep",  10th tuesday from end of september@01:15,	  9,	  3,		  -10,	  75		  ]
[ "oct",  october 31@01:15,				  10,	  0,		  31,	  75		  ]
[ "nov",  last wednesday on or before november 10@01:15,  11,	  -4,		  -10,	  75		  ]
[ "dec",  nil,						  nil,	  nil,		  nil,	  nil		  ]
[ "rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a" ]
#---------------------------------------------------------------------------------------------------------------------------------------------------------#
# лллл;	rule						2001		2001		1999		1999		1992		1992		  # name
# str	zrule						date		str		date		str		date		str		  # type
#---------------------------------------------------------------------------------------------------------------------------------------------------------#
[ "jan",  first monday from start of january@01:15,	  2001-01-01,	  "monday",	  1999-01-04,	  "monday",	  1992-01-06,	  "monday"	  ]
[ "feb",  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "mar",  first wednesday on or after march 10@01:15,	  2001-03-14,	  "wednesday",	  1999-03-10,	  "wednesday",	  1992-03-11,	  "wednesday"	  ]
[ "apr",  last thursday on or before april 1@01:15,	  2001-03-29,	  "thursday",	  1999-04-01,	  "thursday",	  1992-03-26,	  "thursday"	  ]
[ "may",  may 26@01:15,					  2001-05-26,	  "saturday",	  1999-05-26,	  "wednesday",	  1992-05-26,	  "tuesday"	  ]
[ "jun",  second tuesday from end of june@01:15,	  2001-06-19,	  "tuesday",	  1999-06-22,	  "tuesday",	  1992-06-23,	  "tuesday"	  ]
[ "jul",  first sunday from start of july@01:15,	  2001-07-01,	  "sunday",	  1999-07-04,	  "sunday",	  1992-07-05,	  "sunday"	  ]
[ "aug",  first sunday from end of august@01:15,	  2001-08-26,	  "sunday",	  1999-08-29,	  "sunday",	  1992-08-30,	  "sunday"	  ]
[ "sep",  10th tuesday from end of september@01:15,	  2001-07-24,	  "tuesday",	  1999-07-27,	  "tuesday",	  1992-07-28,	  "tuesday"	  ]
[ "oct",  october 31@01:15,				  2001-10-31,	  "wednesday",	  1999-10-31,	  "sunday",	  1992-10-31,	  "saturday"	  ]
[ "nov",  last wednesday on or before november 10@01:15,  2001-11-07,	  "wednesday",	  1999-11-10,	  "wednesday",	  1992-11-04,	  "wednesday"	  ]
[ "dec",  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a" ]
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# лллллллллллллллл!	rule						1572		1572		1		1		-2000		-2000		  # name
# str			zrule						date		str		date		str		date		str		  # type
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
[ "jan",		  first monday from start of january@01:15,	  1572-01-03,	  "monday",	  1-01-01,	  "monday",	  -2000-01-01,	  "monday"	  ]
[ "feb",		  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "mar",		  first wednesday on or after march 10@01:15,	  1572-03-15,	  "wednesday",	  1-03-14,	  "wednesday",	  -2000-03-14,	  "wednesday"	  ]
[ "apr",		  last thursday on or before april 1@01:15,	  1572-03-30,	  "thursday",	  1-03-29,	  "thursday",	  -2000-03-29,	  "thursday"	  ]
[ "may",		  may 26@01:15,					  1572-05-26,	  "friday",	  1-05-26,	  "saturday",	  -2000-05-26,	  "saturday"	  ]
[ "jun",		  second tuesday from end of june@01:15,	  1572-06-20,	  "tuesday",	  1-06-19,	  "tuesday",	  -2000-06-19,	  "tuesday"	  ]
[ "jul",		  first sunday from start of july@01:15,	  1572-07-02,	  "sunday",	  1-07-01,	  "sunday",	  -2000-07-01,	  "sunday"	  ]
[ "aug",		  first sunday from end of august@01:15,	  1572-08-27,	  "sunday",	  1-08-26,	  "sunday",	  -2000-08-26,	  "sunday"	  ]
[ "sep",		  10th tuesday from end of september@01:15,	  1572-07-25,	  "tuesday",	  1-07-24,	  "tuesday",	  -2000-07-24,	  "tuesday"	  ]
[ "oct",		  october 31@01:15,				  1572-10-31,	  "tuesday",	  1-10-31,	  "wednesday",	  -2000-10-31,	  "wednesday"	  ]
[ "nov",		  last wednesday on or before november 10@01:15,  1572-11-08,	  "wednesday",	  1-11-07,	  "wednesday",	  -2000-11-07,	  "wednesday"	  ]
[ "dec",		  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]

# 23:31:29 >  
# 23:31:29 >  Done.
# 23:31:29 >  

