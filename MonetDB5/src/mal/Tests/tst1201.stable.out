stdout of test 'tst1201` in directory 'src/mal` itself:


# 23:31:29 >  
# 23:31:29 >  Mtimeout -timeout 60 mserver5 "--config=/ufs/mk/monet5/Linux/etc/monetdb5.conf" --debug=10 --set "monet_mod_path=/ufs/mk/monet5//Linux/lib/MonetDB5:/ufs/mk/monet5//Linux/lib/MonetDB5/lib:/ufs/mk/monet5//Linux/lib/MonetDB5/bin" --set "gdk_dbfarm=/ufs/mk/monet5//Linux/var/MonetDB5/dbfarm" --set "sql_logdir=/ufs/mk/monet5//Linux/var/MonetDB5/sql_logs" --set "xquery_logdir=/ufs/mk/monet5//Linux/var/MonetDB5/xquery_logs" --set mapi_port=35239 --set xrpc_port=40860 --set monet_prompt= --trace --dbname=mTests_src_mal  tst1201.mal
# 23:31:29 >  

# MonetDB Server v5.0.0_beta2_1
# Copyright (c) 1993-2007 CWI, all rights reserved
# Compiled for x86_64-redhat-linux-gnu/64bit with 64bit OIDs dynamically linked
# dbname:mTests_src_mal
# Visit http://monetdb.cwi.nl/ for further information
## Mil compiler Version 1.0)
## Copyright (c) 1993-2001, CWI. All rights reserved.
#
## Predefined code segment
##
###line 531 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx"
##module(monettime,alarm);
##
##
##
#lzone:= mtime.timezone("GMT+1");
#mtime.timezone_local(lzone);
###line 535 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx"
### test the various ways to create rules
#	rule_jan:= mtime.rule("1st MON from start of JAN@01:15");
##var rule_jan := mtime.rule("1st MON from start of JAN@01:15");
#	rule_mar:= mtime.rule("first WEDNE on or after march 10@01:15");
##var rule_mar := mtime.rule("first WEDNE on or after march 10@01:15");
#	rule_apr:= mtime.rule("last THU on or before aPr 1@01:15");
##var rule_apr := mtime.rule("last THU on or before aPr 1@01:15");
#	rule_may:= mtime.rule("MAY 26@01:15");
##var rule_may := mtime.rule("MAY 26@01:15");
#	rule_jun:= mtime.rule("2nd TUE from end of june@01:15");
##var rule_jun := mtime.rule("2nd TUE from end of june@01:15");
#	rule_jul:= mtime.rule(7,1,1,75);
##var rule_jul := mtime.rule(7,1,1,75);
#	rule_aug:= mtime.rule(8,-1,1,75);
##var rule_aug := mtime.rule(8,-1,1,75);
#	rule_sep:= mtime.rule(9,-10,3,75);
##var rule_sep := mtime.rule(9,-10,3,75);
#	rule_oct:= mtime.rule(10,31,0,75);
##var rule_oct := mtime.rule(10,31,0,75);
#	rule_nov:= mtime.rule(11,-10,-4,75);
##var rule_nov := mtime.rule(11,-10,-4,75);
### nil rules
#	rule_dec:= mtime.rule(12,-31,0,75);
##var rule_dec := mtime.rule(12,-31,0,75);
#	rule_feb:= mtime.rule("first fRiDaY on or after february 30@01:15");
##var rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15");
## 
#	rule_bat:= bat.new(:str,:zrule,10);
##var rule_bat := bat.new(str,rule,10);
#	bat.insert(rule_bat,"jan",rule_jan);
#	bat.insert(rule_bat,"feb",rule_feb);
#	bat.insert(rule_bat,"mar",rule_mar);
#	bat.insert(rule_bat,"apr",rule_apr);
##rule_bat.bat.insert("jan",rule_jan).insert("feb",rule_feb).insert("mar",rule_mar).insert("apr",rule_apr);
#	bat.insert(rule_bat,"may",rule_may);
#	bat.insert(rule_bat,"jun",rule_jun);
#	bat.insert(rule_bat,"jul",rule_jul);
#	bat.insert(rule_bat,"aug",rule_aug);
##rule_bat.bat.insert("may",rule_may).insert("jun",rule_jun).insert("jul",rule_jul).insert("aug",rule_aug);
#	bat.insert(rule_bat,"sep",rule_sep);
#	bat.insert(rule_bat,"oct",rule_oct);
#	bat.insert(rule_bat,"nov",rule_nov);
#	bat.insert(rule_bat,"dec",rule_dec);
##rule_bat.bat.insert("sep",rule_sep).insert("oct",rule_oct).insert("nov",rule_nov).insert("dec",rule_dec);
##
### test the operations on rules
#	ma_a := bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	na_a:bat[:str,:int] := mal.multiplex("mtime","month",rule_bat);
#	oa_a := bat.setColumn(na_a,"month");
##      [month](rule_bat).bat.setColumn("month"),
#	pa_a:bat[:str,:int] := mal.multiplex("mtime","weekday",rule_bat);
#	qa_a := bat.setColumn(pa_a,"weekday");
##      [weekday](rule_bat).bat.setColumn("weekday"),
#	ra_a:bat[:str,:int] := mal.multiplex("mtime","day",rule_bat);
#	sa_a := bat.setColumn(ra_a,"day");
##      [day](rule_bat).bat.setColumn("day"),
#	ta_a:bat[:str,:int] := mal.multiplex("mtime","minutes",rule_bat);
#	ua_a := bat.setColumn(ta_a,"minutes");
#io.print("rule_bat,na_a,pa_a,ra_a,ta_a");
#	va_a := io.print(rule_bat,na_a,pa_a,ra_a,ta_a);
##      [minutes](rule_bat).bat.setColumn("minutes"));
##
#	bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	xa_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,2001);
#	ya_a := bat.setColumn(xa_a,"2001");
##      [compute](rule_bat, 2001).bat.setColumn("2001"),
#	ab_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,2001);
#	bb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",ab_a);
#	cb_a:bat[:str,:str] := mal.multiplex("mtime","dayname",bb_a);
#	bat.setColumn(cb_a,"2001");
##      [dayname]([dayofweek]([compute](rule_bat, 2001))).bat.setColumn("2001"),
#	eb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1999);
#	bat.setColumn(eb_a,"1999");
##      [compute](rule_bat, 1999).bat.setColumn("1999"),
#	gb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1999);
#	hb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",gb_a);
#	ib_a:bat[:str,:str] := mal.multiplex("mtime","dayname",hb_a);
#	bat.setColumn(ib_a,"1999");
##      [dayname]([dayofweek]([compute](rule_bat, 1999))).bat.setColumn("1999"),
#	kb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1992);
#	bat.setColumn(kb_a,"1992");
##      [compute](rule_bat, 1992).bat.setColumn("1992"),
#	mb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1992);
#	nb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",mb_a);
#	ob_a:bat[:str,:str] := mal.multiplex("mtime","dayname",nb_a);
#	bat.setColumn(ob_a,"1992");
#io.print("rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a");
#	qb_a := io.print(rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a);
##      [dayname]([dayofweek]([compute](rule_bat, 1992))).bat.setColumn("1992"));
##
#	rb_a := bat.setColumn(rule_bat,"rule");
##io.print(rule_bat.bat.setColumn("rule"),
#	sb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1572);
#	tb_a := bat.setColumn(sb_a,"1572");
##      [compute](rule_bat, 1572).bat.setColumn("1572"),
#	ub_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1572);
#	vb_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",ub_a);
#	wb_a:bat[:str,:str] := mal.multiplex("mtime","dayname",vb_a);
#	xb_a := bat.setColumn(wb_a,"1572");
##      [dayname]([dayofweek]([compute](rule_bat, 1572))).bat.setColumn("1572"),
#	yb_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1);
#	ac_a := bat.setColumn(yb_a,"1");
##      [compute](rule_bat, 1).bat.setColumn("1"),
#	bc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,1);
#	cc_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",bc_a);
#	dc_a:bat[:str,:str] := mal.multiplex("mtime","dayname",cc_a);
#	ec_a := bat.setColumn(dc_a,"1");
##      [dayname]([dayofweek]([compute](rule_bat, 1))).bat.setColumn("1"),
#	fc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,-2000);
#	gc_a := bat.setColumn(fc_a,"-2000");
##      [compute](rule_bat, -2000).bat.setColumn("-2000"),
#	hc_a:bat[:str,:date] := mal.multiplex("mtime","compute",rule_bat,-2000);
#	ic_a:bat[:str,:int] := mal.multiplex("mtime","dayofweek",hc_a);
#	jc_a:bat[:str,:str] := mal.multiplex("mtime","dayname",ic_a);
#	kc_a := bat.setColumn(jc_a,"-2000");
#io.print("rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a");
#	lc_a := io.print(rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a);
##      [dayname]([dayofweek]([compute](rule_bat, -2000))).bat.setColumn("-2000"));
##
##
#
function user.main():void;              #  0 main:void := user.main() {G}
# Mil compiler Version 1.0) 
# Copyright (c) 1993-2001, CWI. All rights reserved. 
# Predefined code segment 
##line 531 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx" 
#module(monettime,alarm); 
    lzone := mtime.timezone("GMT+1");   #  6 lzone:timezone := MTIMEtzone_fromstr(_7:str) 
    mtime.timezone_local(lzone);        #  7 _8:void := MTIMEtzone_set_local(lzone:timezone) 
##line 535 "/ufs/mk/monet_5-0/src/modules/atoms/monettime.mx" 
## test the various ways to create rules 
    rule_jan := mtime.rule("1st MON from start of JAN@01:15");# 10 rule_jan:zrule := MTIMErule_fromstr(_12:str) 
#var rule_jan := mtime.rule("1st MON from start of JAN@01:15"); 
    rule_mar := mtime.rule("first WEDNE on or after march 10@01:15");# 12 rule_mar:zrule := MTIMErule_fromstr(_15:str) 
#var rule_mar := mtime.rule("first WEDNE on or after march 10@01:15"); 
    rule_apr := mtime.rule("last THU on or before aPr 1@01:15");# 14 rule_apr:zrule := MTIMErule_fromstr(_18:str) 
#var rule_apr := mtime.rule("last THU on or before aPr 1@01:15"); 
    rule_may := mtime.rule("MAY 26@01:15");# 16 rule_may:zrule := MTIMErule_fromstr(_21:str) 
#var rule_may := mtime.rule("MAY 26@01:15"); 
    rule_jun := mtime.rule("2nd TUE from end of june@01:15");# 18 rule_jun:zrule := MTIMErule_fromstr(_24:str) 
#var rule_jun := mtime.rule("2nd TUE from end of june@01:15"); 
    rule_jul := mtime.rule(7,1,1,75);   # 20 rule_jul:zrule := MTIMErule_create(_27:int, _28:int, _28:int, _29:int) 
#var rule_jul := mtime.rule(7,1,1,75); 
    rule_aug := mtime.rule(8,-1,1,75);  # 22 rule_aug:zrule := MTIMErule_create(_32:int, _33:int, _28:int, _29:int) 
#var rule_aug := mtime.rule(8,-1,1,75); 
    rule_sep := mtime.rule(9,-10,3,75); # 24 rule_sep:zrule := MTIMErule_create(_36:int, _37:int, _38:int, _29:int) 
#var rule_sep := mtime.rule(9,-10,3,75); 
    rule_oct := mtime.rule(10,31,0,75); # 26 rule_oct:zrule := MTIMErule_create(_41:int, _42:int, _43:int, _29:int) 
#var rule_oct := mtime.rule(10,31,0,75); 
    rule_nov := mtime.rule(11,-10,-4,75);# 28 rule_nov:zrule := MTIMErule_create(_46:int, _37:int, _47:int, _29:int) 
#var rule_nov := mtime.rule(11,-10,-4,75); 
## nil rules 
    rule_dec := mtime.rule(12,-31,0,75);# 31 rule_dec:zrule := MTIMErule_create(_51:int, _52:int, _43:int, _29:int) 
#var rule_dec := mtime.rule(12,-31,0,75); 
    rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15");# 33 rule_feb:zrule := MTIMErule_fromstr(_55:str) 
#var rule_feb := mtime.rule("first fRiDaY on or after february 30@01:15"); 
#  
    rule_bat := bat.new(:str,:zrule,10);# 36 rule_bat:bat[:str,:zrule] := CMDBATnewint(_59:str, _60:zrule, _41:int) {G}
#var rule_bat := bat.new(str,rule,10); 
    bat.insert(rule_bat,"jan",rule_jan);# 38 _62:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _63:str, rule_jan:zrule) 
    bat.insert(rule_bat,"feb",rule_feb);# 39 _64:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _65:str, rule_feb:zrule) 
    bat.insert(rule_bat,"mar",rule_mar);# 40 _66:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _67:str, rule_mar:zrule) 
    bat.insert(rule_bat,"apr",rule_apr);# 41 _68:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _69:str, rule_apr:zrule) 
#rule_bat.bat.insert("jan",rule_jan).insert("feb",rule_feb).insert("mar",rule_mar).insert("apr",rule_apr); 
    bat.insert(rule_bat,"may",rule_may);# 43 _71:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _72:str, rule_may:zrule) 
    bat.insert(rule_bat,"jun",rule_jun);# 44 _73:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _74:str, rule_jun:zrule) 
    bat.insert(rule_bat,"jul",rule_jul);# 45 _75:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _76:str, rule_jul:zrule) 
    bat.insert(rule_bat,"aug",rule_aug);# 46 _77:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _78:str, rule_aug:zrule) 
#rule_bat.bat.insert("may",rule_may).insert("jun",rule_jun).insert("jul",rule_jul).insert("aug",rule_aug); 
    bat.insert(rule_bat,"sep",rule_sep);# 48 _80:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _81:str, rule_sep:zrule) 
    bat.insert(rule_bat,"oct",rule_oct);# 49 _82:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _83:str, rule_oct:zrule) 
    bat.insert(rule_bat,"nov",rule_nov);# 50 _84:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _85:str, rule_nov:zrule) 
    bat.insert(rule_bat,"dec",rule_dec);# 51 _86:void := BKCinsert_bun(rule_bat:bat[:str,:zrule], _87:str, rule_dec:zrule) 
#rule_bat.bat.insert("sep",rule_sep).insert("oct",rule_oct).insert("nov",rule_nov).insert("dec",rule_dec); 
## test the operations on rules 
    ma_a := bat.setColumn(rule_bat,"rule");# 54 ma_a:void := BKCsetColumn(rule_bat:bat[:str,:zrule], _91:str) 
#io.print(rule_bat.bat.setColumn("rule"), 
    _192 := bat.new(nil:str,nil:int);   # 56 _192:bat[:str,:int] := CMDBATnew(_193:str, _194:int) {G}
barrier (_196,_197,_198):= bat.newIterator(rule_bat);# 57 (_196:lng, _197:str, _198:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ64}
    _200 := mtime.month(_198);          # 58 _200:int := MTIMErule_extract_month(_198:zrule) 
    bat.insert(_192,_197,_200);         # 59 _201:void := BKCinsert_bun(_192:bat[:str,:int], _197:str, _200:int) 
    redo (_196,_197,_198):= bat.hasMoreElements(rule_bat);# 60 (_196:lng, _197:str, _198:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ58}
catch MALException:str ;                # 61 MALException:str {J63}
    redo (_196,_197,_198):= bat.hasMoreElements(rule_bat);# 62 (_196:lng, _197:str, _198:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ58}
exit MALException:str ;                 # 63 MALException:str 
exit (_196,_197,_198);                  # 64 (_196:lng, _197:str, _198:zrule) 
    na_a:bat[:str,:int]  := _192;       # 65 na_a:bat[:str,:int] := _192:bat[:str,:int] {G}
    oa_a := bat.setColumn(na_a,"month");# 66 oa_a:void := BKCsetColumn(na_a:bat[:str,:int], _95:str) 
#      [month](rule_bat).bat.setColumn("month"), 
    _207 := bat.new(nil:str,nil:int);   # 68 _207:bat[:str,:int] := CMDBATnew(_193:str, _194:int) {G}
barrier (_209,_210,_211):= bat.newIterator(rule_bat);# 69 (_209:lng, _210:str, _211:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ76}
    _213 := mtime.weekday(_211);        # 70 _213:int := MTIMErule_extract_weekday(_211:zrule) 
    bat.insert(_207,_210,_213);         # 71 _214:void := BKCinsert_bun(_207:bat[:str,:int], _210:str, _213:int) 
    redo (_209,_210,_211):= bat.hasMoreElements(rule_bat);# 72 (_209:lng, _210:str, _211:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ70}
catch MALException:str ;                # 73 MALException:str {J75}
    redo (_209,_210,_211):= bat.hasMoreElements(rule_bat);# 74 (_209:lng, _210:str, _211:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ70}
exit MALException:str ;                 # 75 MALException:str 
exit (_209,_210,_211);                  # 76 (_209:lng, _210:str, _211:zrule) 
    pa_a:bat[:str,:int]  := _207;       # 77 pa_a:bat[:str,:int] := _207:bat[:str,:int] {G}
    qa_a := bat.setColumn(pa_a,"weekday");# 78 qa_a:void := BKCsetColumn(pa_a:bat[:str,:int], _99:str) 
#      [weekday](rule_bat).bat.setColumn("weekday"), 
    _220 := bat.new(nil:str,nil:int);   # 80 _220:bat[:str,:int] := CMDBATnew(_193:str, _194:int) {G}
barrier (_222,_223,_224):= bat.newIterator(rule_bat);# 81 (_222:lng, _223:str, _224:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ88}
    _226 := mtime.day(_224);            # 82 _226:int := MTIMErule_extract_day(_224:zrule) 
    bat.insert(_220,_223,_226);         # 83 _227:void := BKCinsert_bun(_220:bat[:str,:int], _223:str, _226:int) 
    redo (_222,_223,_224):= bat.hasMoreElements(rule_bat);# 84 (_222:lng, _223:str, _224:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ82}
catch MALException:str ;                # 85 MALException:str {J87}
    redo (_222,_223,_224):= bat.hasMoreElements(rule_bat);# 86 (_222:lng, _223:str, _224:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ82}
exit MALException:str ;                 # 87 MALException:str 
exit (_222,_223,_224);                  # 88 (_222:lng, _223:str, _224:zrule) 
    ra_a:bat[:str,:int]  := _220;       # 89 ra_a:bat[:str,:int] := _220:bat[:str,:int] {G}
    sa_a := bat.setColumn(ra_a,"day");  # 90 sa_a:void := BKCsetColumn(ra_a:bat[:str,:int], _103:str) 
#      [day](rule_bat).bat.setColumn("day"), 
    _233 := bat.new(nil:str,nil:int);   # 92 _233:bat[:str,:int] := CMDBATnew(_234:str, _235:int) {G}
barrier (_237,_238,_239):= bat.newIterator(rule_bat);# 93 (_237:lng, _238:str, _239:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ100}
    _241 := mtime.minutes(_239);        # 94 _241:int := MTIMErule_extract_minutes(_239:zrule) 
    bat.insert(_233,_238,_241);         # 95 _242:void := BKCinsert_bun(_233:bat[:str,:int], _238:str, _241:int) 
    redo (_237,_238,_239):= bat.hasMoreElements(rule_bat);# 96 (_237:lng, _238:str, _239:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ94}
catch MALException:str ;                # 97 MALException:str {J99}
    redo (_237,_238,_239):= bat.hasMoreElements(rule_bat);# 98 (_237:lng, _238:str, _239:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ94}
exit MALException:str ;                 # 99 MALException:str 
exit (_237,_238,_239);                  #100 (_237:lng, _238:str, _239:zrule) 
    ta_a:bat[:str,:int]  := _233;       #101 ta_a:bat[:str,:int] := _233:bat[:str,:int] {G}
    ua_a := bat.setColumn(ta_a,"minutes");#102 ua_a:void := BKCsetColumn(ta_a:bat[:str,:int], _107:str) 
    io.print("rule_bat,na_a,pa_a,ra_a,ta_a");#103 _109:void := IOprint_val(_110:str) 
    va_a := io.print(rule_bat,na_a,pa_a,ra_a,ta_a);#104 va_a:void := IOtable(rule_bat:bat[:str,:zrule], na_a:bat[:str,:int], pa_a:bat[:str,:int], ra_a:bat[:str,:int], ta_a:bat[:str,:int]) 
#      [minutes](rule_bat).bat.setColumn("minutes")); 
    bat.setColumn(rule_bat,"rule");     #106 _113:void := BKCsetColumn(rule_bat:bat[:str,:zrule], _91:str) 
#io.print(rule_bat.bat.setColumn("rule"), 
    _248 := bat.new(nil:str,nil:date);  #108 _248:bat[:str,:date] := CMDBATnew(_234:str, _249:date) {G}
barrier (_251,_252,_253):= bat.newIterator(rule_bat);#109 (_251:lng, _252:str, _253:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ116}
    _255 := mtime.compute(_253,2001);   #110 _255:date := MTIMEcompute_rule_foryear(_253:zrule, _117:int) 
    bat.insert(_248,_252,_255);         #111 _256:void := BKCinsert_bun(_248:bat[:str,:date], _252:str, _255:date) 
    redo (_251,_252,_253):= bat.hasMoreElements(rule_bat);#112 (_251:lng, _252:str, _253:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ110}
catch MALException:str ;                #113 MALException:str {J115}
    redo (_251,_252,_253):= bat.hasMoreElements(rule_bat);#114 (_251:lng, _252:str, _253:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ110}
exit MALException:str ;                 #115 MALException:str 
exit (_251,_252,_253);                  #116 (_251:lng, _252:str, _253:zrule) 
    xa_a:bat[:str,:date]  := _248;      #117 xa_a:bat[:str,:date] := _248:bat[:str,:date] {G}
    ya_a := bat.setColumn(xa_a,"2001"); #118 ya_a:void := BKCsetColumn(xa_a:bat[:str,:date], _119:str) 
#      [compute](rule_bat, 2001).bat.setColumn("2001"), 
    _262 := bat.new(nil:str,nil:date);  #120 _262:bat[:str,:date] := CMDBATnew(_234:str, _249:date) {G}
barrier (_264,_265,_266):= bat.newIterator(rule_bat);#121 (_264:lng, _265:str, _266:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ128}
    _268 := mtime.compute(_266,2001);   #122 _268:date := MTIMEcompute_rule_foryear(_266:zrule, _117:int) 
    bat.insert(_262,_265,_268);         #123 _269:void := BKCinsert_bun(_262:bat[:str,:date], _265:str, _268:date) 
    redo (_264,_265,_266):= bat.hasMoreElements(rule_bat);#124 (_264:lng, _265:str, _266:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ122}
catch MALException:str ;                #125 MALException:str {J127}
    redo (_264,_265,_266):= bat.hasMoreElements(rule_bat);#126 (_264:lng, _265:str, _266:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ122}
exit MALException:str ;                 #127 MALException:str 
exit (_264,_265,_266);                  #128 (_264:lng, _265:str, _266:zrule) 
    ab_a:bat[:str,:date]  := _262;      #129 ab_a:bat[:str,:date] := _262:bat[:str,:date] {G}
    _275 := bat.new(nil:str,nil:int);   #130 _275:bat[:str,:int] := CMDBATnew(_276:str, _277:int) {G}
barrier (_279,_280,_281):= bat.newIterator(ab_a);#131 (_279:lng, _280:str, _281:date) := CHPbunIterator(ab_a:bat[:str,:date]) {GJ138}
    _283 := mtime.dayofweek(_281);      #132 _283:int := MTIMEdate_extract_dayofweek(_281:date) 
    bat.insert(_275,_280,_283);         #133 _284:void := BKCinsert_bun(_275:bat[:str,:int], _280:str, _283:int) 
    redo (_279,_280,_281):= bat.hasMoreElements(ab_a);#134 (_279:lng, _280:str, _281:date) := CHPbunHasMoreElements(ab_a:bat[:str,:date]) {GJ132}
catch MALException:str ;                #135 MALException:str {J137}
    redo (_279,_280,_281):= bat.hasMoreElements(ab_a);#136 (_279:lng, _280:str, _281:date) := CHPbunHasMoreElements(ab_a:bat[:str,:date]) {GJ132}
exit MALException:str ;                 #137 MALException:str 
exit (_279,_280,_281);                  #138 (_279:lng, _280:str, _281:date) 
    bb_a:bat[:str,:int]  := _275;       #139 bb_a:bat[:str,:int] := _275:bat[:str,:int] {G}
    _290 := bat.new(nil:str,nil:str);   #140 _290:bat[:str,:str] := CMDBATnew(_276:str, _276:str) {G}
barrier (_292,_293,_294):= bat.newIterator(bb_a);#141 (_292:lng, _293:str, _294:int) := CHPbunIterator(bb_a:bat[:str,:int]) {GJ148}
    _296 := mtime.dayname(_294);        #142 _296:str := MTIMEday_to_str(_294:int) {G}
    bat.insert(_290,_293,_296);         #143 _297:void := BKCinsert_bun(_290:bat[:str,:str], _293:str, _296:str) 
    redo (_292,_293,_294):= bat.hasMoreElements(bb_a);#144 (_292:lng, _293:str, _294:int) := CHPbunHasMoreElements(bb_a:bat[:str,:int]) {GJ142}
catch MALException:str ;                #145 MALException:str {J147}
    redo (_292,_293,_294):= bat.hasMoreElements(bb_a);#146 (_292:lng, _293:str, _294:int) := CHPbunHasMoreElements(bb_a:bat[:str,:int]) {GJ142}
exit MALException:str ;                 #147 MALException:str 
exit (_292,_293,_294);                  #148 (_292:lng, _293:str, _294:int) 
    cb_a:bat[:str,:str]  := _290;       #149 cb_a:bat[:str,:str] := _290:bat[:str,:str] {G}
    bat.setColumn(cb_a,"2001");         #150 _126:void := BKCsetColumn(cb_a:bat[:str,:str], _119:str) 
#      [dayname]([dayofweek]([compute](rule_bat, 2001))).bat.setColumn("2001"), 
    _303 := bat.new(nil:str,nil:date);  #152 _303:bat[:str,:date] := CMDBATnew(_276:str, _304:date) {G}
barrier (_306,_307,_308):= bat.newIterator(rule_bat);#153 (_306:lng, _307:str, _308:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ160}
    _310 := mtime.compute(_308,1999);   #154 _310:date := MTIMEcompute_rule_foryear(_308:zrule, _130:int) 
    bat.insert(_303,_307,_310);         #155 _311:void := BKCinsert_bun(_303:bat[:str,:date], _307:str, _310:date) 
    redo (_306,_307,_308):= bat.hasMoreElements(rule_bat);#156 (_306:lng, _307:str, _308:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ154}
catch MALException:str ;                #157 MALException:str {J159}
    redo (_306,_307,_308):= bat.hasMoreElements(rule_bat);#158 (_306:lng, _307:str, _308:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ154}
exit MALException:str ;                 #159 MALException:str 
exit (_306,_307,_308);                  #160 (_306:lng, _307:str, _308:zrule) 
    eb_a:bat[:str,:date]  := _303;      #161 eb_a:bat[:str,:date] := _303:bat[:str,:date] {G}
    bat.setColumn(eb_a,"1999");         #162 _131:void := BKCsetColumn(eb_a:bat[:str,:date], _132:str) 
#      [compute](rule_bat, 1999).bat.setColumn("1999"), 
    _317 := bat.new(nil:str,nil:date);  #164 _317:bat[:str,:date] := CMDBATnew(_318:str, _304:date) {G}
barrier (_320,_321,_322):= bat.newIterator(rule_bat);#165 (_320:lng, _321:str, _322:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ172}
    _324 := mtime.compute(_322,1999);   #166 _324:date := MTIMEcompute_rule_foryear(_322:zrule, _130:int) 
    bat.insert(_317,_321,_324);         #167 _325:void := BKCinsert_bun(_317:bat[:str,:date], _321:str, _324:date) 
    redo (_320,_321,_322):= bat.hasMoreElements(rule_bat);#168 (_320:lng, _321:str, _322:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ166}
catch MALException:str ;                #169 MALException:str {J171}
    redo (_320,_321,_322):= bat.hasMoreElements(rule_bat);#170 (_320:lng, _321:str, _322:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ166}
exit MALException:str ;                 #171 MALException:str 
exit (_320,_321,_322);                  #172 (_320:lng, _321:str, _322:zrule) 
    gb_a:bat[:str,:date]  := _317;      #173 gb_a:bat[:str,:date] := _317:bat[:str,:date] {G}
    _331 := bat.new(nil:str,nil:int);   #174 _331:bat[:str,:int] := CMDBATnew(_318:str, _332:int) {G}
barrier (_334,_335,_336):= bat.newIterator(gb_a);#175 (_334:lng, _335:str, _336:date) := CHPbunIterator(gb_a:bat[:str,:date]) {GJ182}
    _338 := mtime.dayofweek(_336);      #176 _338:int := MTIMEdate_extract_dayofweek(_336:date) 
    bat.insert(_331,_335,_338);         #177 _339:void := BKCinsert_bun(_331:bat[:str,:int], _335:str, _338:int) 
    redo (_334,_335,_336):= bat.hasMoreElements(gb_a);#178 (_334:lng, _335:str, _336:date) := CHPbunHasMoreElements(gb_a:bat[:str,:date]) {GJ176}
catch MALException:str ;                #179 MALException:str {J181}
    redo (_334,_335,_336):= bat.hasMoreElements(gb_a);#180 (_334:lng, _335:str, _336:date) := CHPbunHasMoreElements(gb_a:bat[:str,:date]) {GJ176}
exit MALException:str ;                 #181 MALException:str 
exit (_334,_335,_336);                  #182 (_334:lng, _335:str, _336:date) 
    hb_a:bat[:str,:int]  := _331;       #183 hb_a:bat[:str,:int] := _331:bat[:str,:int] {G}
    _345 := bat.new(nil:str,nil:str);   #184 _345:bat[:str,:str] := CMDBATnew(_318:str, _318:str) {G}
barrier (_347,_348,_349):= bat.newIterator(hb_a);#185 (_347:lng, _348:str, _349:int) := CHPbunIterator(hb_a:bat[:str,:int]) {GJ192}
    _351 := mtime.dayname(_349);        #186 _351:str := MTIMEday_to_str(_349:int) {G}
    bat.insert(_345,_348,_351);         #187 _352:void := BKCinsert_bun(_345:bat[:str,:str], _348:str, _351:str) 
    redo (_347,_348,_349):= bat.hasMoreElements(hb_a);#188 (_347:lng, _348:str, _349:int) := CHPbunHasMoreElements(hb_a:bat[:str,:int]) {GJ186}
catch MALException:str ;                #189 MALException:str {J191}
    redo (_347,_348,_349):= bat.hasMoreElements(hb_a);#190 (_347:lng, _348:str, _349:int) := CHPbunHasMoreElements(hb_a:bat[:str,:int]) {GJ186}
exit MALException:str ;                 #191 MALException:str 
exit (_347,_348,_349);                  #192 (_347:lng, _348:str, _349:int) 
    ib_a:bat[:str,:str]  := _345;       #193 ib_a:bat[:str,:str] := _345:bat[:str,:str] {G}
    bat.setColumn(ib_a,"1999");         #194 _137:void := BKCsetColumn(ib_a:bat[:str,:str], _132:str) 
#      [dayname]([dayofweek]([compute](rule_bat, 1999))).bat.setColumn("1999"), 
    _358 := bat.new(nil:str,nil:date);  #196 _358:bat[:str,:date] := CMDBATnew(_359:str, _360:date) {G}
barrier (_362,_363,_364):= bat.newIterator(rule_bat);#197 (_362:lng, _363:str, _364:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ204}
    _366 := mtime.compute(_364,1992);   #198 _366:date := MTIMEcompute_rule_foryear(_364:zrule, _140:int) 
    bat.insert(_358,_363,_366);         #199 _367:void := BKCinsert_bun(_358:bat[:str,:date], _363:str, _366:date) 
    redo (_362,_363,_364):= bat.hasMoreElements(rule_bat);#200 (_362:lng, _363:str, _364:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ198}
catch MALException:str ;                #201 MALException:str {J203}
    redo (_362,_363,_364):= bat.hasMoreElements(rule_bat);#202 (_362:lng, _363:str, _364:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ198}
exit MALException:str ;                 #203 MALException:str 
exit (_362,_363,_364);                  #204 (_362:lng, _363:str, _364:zrule) 
    kb_a:bat[:str,:date]  := _358;      #205 kb_a:bat[:str,:date] := _358:bat[:str,:date] {G}
    bat.setColumn(kb_a,"1992");         #206 _141:void := BKCsetColumn(kb_a:bat[:str,:date], _142:str) 
#      [compute](rule_bat, 1992).bat.setColumn("1992"), 
    _373 := bat.new(nil:str,nil:date);  #208 _373:bat[:str,:date] := CMDBATnew(_359:str, _360:date) {G}
barrier (_375,_376,_377):= bat.newIterator(rule_bat);#209 (_375:lng, _376:str, _377:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ216}
    _379 := mtime.compute(_377,1992);   #210 _379:date := MTIMEcompute_rule_foryear(_377:zrule, _140:int) 
    bat.insert(_373,_376,_379);         #211 _380:void := BKCinsert_bun(_373:bat[:str,:date], _376:str, _379:date) 
    redo (_375,_376,_377):= bat.hasMoreElements(rule_bat);#212 (_375:lng, _376:str, _377:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ210}
catch MALException:str ;                #213 MALException:str {J215}
    redo (_375,_376,_377):= bat.hasMoreElements(rule_bat);#214 (_375:lng, _376:str, _377:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ210}
exit MALException:str ;                 #215 MALException:str 
exit (_375,_376,_377);                  #216 (_375:lng, _376:str, _377:zrule) 
    mb_a:bat[:str,:date]  := _373;      #217 mb_a:bat[:str,:date] := _373:bat[:str,:date] {G}
    _386 := bat.new(nil:str,nil:int);   #218 _386:bat[:str,:int] := CMDBATnew(_359:str, _387:int) {G}
barrier (_389,_390,_391):= bat.newIterator(mb_a);#219 (_389:lng, _390:str, _391:date) := CHPbunIterator(mb_a:bat[:str,:date]) {GJ226}
    _393 := mtime.dayofweek(_391);      #220 _393:int := MTIMEdate_extract_dayofweek(_391:date) 
    bat.insert(_386,_390,_393);         #221 _394:void := BKCinsert_bun(_386:bat[:str,:int], _390:str, _393:int) 
    redo (_389,_390,_391):= bat.hasMoreElements(mb_a);#222 (_389:lng, _390:str, _391:date) := CHPbunHasMoreElements(mb_a:bat[:str,:date]) {GJ220}
catch MALException:str ;                #223 MALException:str {J225}
    redo (_389,_390,_391):= bat.hasMoreElements(mb_a);#224 (_389:lng, _390:str, _391:date) := CHPbunHasMoreElements(mb_a:bat[:str,:date]) {GJ220}
exit MALException:str ;                 #225 MALException:str 
exit (_389,_390,_391);                  #226 (_389:lng, _390:str, _391:date) 
    nb_a:bat[:str,:int]  := _386;       #227 nb_a:bat[:str,:int] := _386:bat[:str,:int] {G}
    _400 := bat.new(nil:str,nil:str);   #228 _400:bat[:str,:str] := CMDBATnew(_401:str, _401:str) {G}
barrier (_403,_404,_405):= bat.newIterator(nb_a);#229 (_403:lng, _404:str, _405:int) := CHPbunIterator(nb_a:bat[:str,:int]) {GJ236}
    _407 := mtime.dayname(_405);        #230 _407:str := MTIMEday_to_str(_405:int) {G}
    bat.insert(_400,_404,_407);         #231 _408:void := BKCinsert_bun(_400:bat[:str,:str], _404:str, _407:str) 
    redo (_403,_404,_405):= bat.hasMoreElements(nb_a);#232 (_403:lng, _404:str, _405:int) := CHPbunHasMoreElements(nb_a:bat[:str,:int]) {GJ230}
catch MALException:str ;                #233 MALException:str {J235}
    redo (_403,_404,_405):= bat.hasMoreElements(nb_a);#234 (_403:lng, _404:str, _405:int) := CHPbunHasMoreElements(nb_a:bat[:str,:int]) {GJ230}
exit MALException:str ;                 #235 MALException:str 
exit (_403,_404,_405);                  #236 (_403:lng, _404:str, _405:int) 
    ob_a:bat[:str,:str]  := _400;       #237 ob_a:bat[:str,:str] := _400:bat[:str,:str] {G}
    bat.setColumn(ob_a,"1992");         #238 _147:void := BKCsetColumn(ob_a:bat[:str,:str], _142:str) 
    io.print("rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a");#239 _148:void := IOprint_val(_149:str) 
    qb_a := io.print(rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a);#240 qb_a:void := IOtable(rule_bat:bat[:str,:zrule], xa_a:bat[:str,:date], cb_a:bat[:str,:str], eb_a:bat[:str,:date], ib_a:bat[:str,:str], kb_a:bat[:str,:date], ob_a:bat[:str,:str]) 
#      [dayname]([dayofweek]([compute](rule_bat, 1992))).bat.setColumn("1992")); 
    rb_a := bat.setColumn(rule_bat,"rule");#242 rb_a:void := BKCsetColumn(rule_bat:bat[:str,:zrule], _153:str) 
#io.print(rule_bat.bat.setColumn("rule"), 
    _414 := bat.new(nil:str,nil:date);  #244 _414:bat[:str,:date] := CMDBATnew(_401:str, _415:date) {G}
barrier (_417,_418,_419):= bat.newIterator(rule_bat);#245 (_417:lng, _418:str, _419:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ252}
    _421 := mtime.compute(_419,1572);   #246 _421:date := MTIMEcompute_rule_foryear(_419:zrule, _157:int) 
    bat.insert(_414,_418,_421);         #247 _422:void := BKCinsert_bun(_414:bat[:str,:date], _418:str, _421:date) 
    redo (_417,_418,_419):= bat.hasMoreElements(rule_bat);#248 (_417:lng, _418:str, _419:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ246}
catch MALException:str ;                #249 MALException:str {J251}
    redo (_417,_418,_419):= bat.hasMoreElements(rule_bat);#250 (_417:lng, _418:str, _419:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ246}
exit MALException:str ;                 #251 MALException:str 
exit (_417,_418,_419);                  #252 (_417:lng, _418:str, _419:zrule) 
    sb_a:bat[:str,:date]  := _414;      #253 sb_a:bat[:str,:date] := _414:bat[:str,:date] {G}
    tb_a := bat.setColumn(sb_a,"1572"); #254 tb_a:void := BKCsetColumn(sb_a:bat[:str,:date], _159:str) 
#      [compute](rule_bat, 1572).bat.setColumn("1572"), 
    _428 := bat.new(nil:str,nil:date);  #256 _428:bat[:str,:date] := CMDBATnew(_401:str, _415:date) {G}
barrier (_430,_431,_432):= bat.newIterator(rule_bat);#257 (_430:lng, _431:str, _432:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ264}
    _434 := mtime.compute(_432,1572);   #258 _434:date := MTIMEcompute_rule_foryear(_432:zrule, _157:int) 
    bat.insert(_428,_431,_434);         #259 _435:void := BKCinsert_bun(_428:bat[:str,:date], _431:str, _434:date) 
    redo (_430,_431,_432):= bat.hasMoreElements(rule_bat);#260 (_430:lng, _431:str, _432:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ258}
catch MALException:str ;                #261 MALException:str {J263}
    redo (_430,_431,_432):= bat.hasMoreElements(rule_bat);#262 (_430:lng, _431:str, _432:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ258}
exit MALException:str ;                 #263 MALException:str 
exit (_430,_431,_432);                  #264 (_430:lng, _431:str, _432:zrule) 
    ub_a:bat[:str,:date]  := _428;      #265 ub_a:bat[:str,:date] := _428:bat[:str,:date] {G}
    _441 := bat.new(nil:str,nil:int);   #266 _441:bat[:str,:int] := CMDBATnew(_442:str, _443:int) {G}
barrier (_445,_446,_447):= bat.newIterator(ub_a);#267 (_445:lng, _446:str, _447:date) := CHPbunIterator(ub_a:bat[:str,:date]) {GJ274}
    _449 := mtime.dayofweek(_447);      #268 _449:int := MTIMEdate_extract_dayofweek(_447:date) 
    bat.insert(_441,_446,_449);         #269 _450:void := BKCinsert_bun(_441:bat[:str,:int], _446:str, _449:int) 
    redo (_445,_446,_447):= bat.hasMoreElements(ub_a);#270 (_445:lng, _446:str, _447:date) := CHPbunHasMoreElements(ub_a:bat[:str,:date]) {GJ268}
catch MALException:str ;                #271 MALException:str {J273}
    redo (_445,_446,_447):= bat.hasMoreElements(ub_a);#272 (_445:lng, _446:str, _447:date) := CHPbunHasMoreElements(ub_a:bat[:str,:date]) {GJ268}
exit MALException:str ;                 #273 MALException:str 
exit (_445,_446,_447);                  #274 (_445:lng, _446:str, _447:date) 
    vb_a:bat[:str,:int]  := _441;       #275 vb_a:bat[:str,:int] := _441:bat[:str,:int] {G}
    _456 := bat.new(nil:str,nil:str);   #276 _456:bat[:str,:str] := CMDBATnew(_442:str, _442:str) {G}
barrier (_458,_459,_460):= bat.newIterator(vb_a);#277 (_458:lng, _459:str, _460:int) := CHPbunIterator(vb_a:bat[:str,:int]) {GJ284}
    _462 := mtime.dayname(_460);        #278 _462:str := MTIMEday_to_str(_460:int) {G}
    bat.insert(_456,_459,_462);         #279 _463:void := BKCinsert_bun(_456:bat[:str,:str], _459:str, _462:str) 
    redo (_458,_459,_460):= bat.hasMoreElements(vb_a);#280 (_458:lng, _459:str, _460:int) := CHPbunHasMoreElements(vb_a:bat[:str,:int]) {GJ278}
catch MALException:str ;                #281 MALException:str {J283}
    redo (_458,_459,_460):= bat.hasMoreElements(vb_a);#282 (_458:lng, _459:str, _460:int) := CHPbunHasMoreElements(vb_a:bat[:str,:int]) {GJ278}
exit MALException:str ;                 #283 MALException:str 
exit (_458,_459,_460);                  #284 (_458:lng, _459:str, _460:int) 
    wb_a:bat[:str,:str]  := _456;       #285 wb_a:bat[:str,:str] := _456:bat[:str,:str] {G}
    xb_a := bat.setColumn(wb_a,"1572"); #286 xb_a:void := BKCsetColumn(wb_a:bat[:str,:str], _159:str) 
#      [dayname]([dayofweek]([compute](rule_bat, 1572))).bat.setColumn("1572"), 
    _469 := bat.new(nil:str,nil:date);  #288 _469:bat[:str,:date] := CMDBATnew(_442:str, _470:date) {G}
barrier (_472,_473,_474):= bat.newIterator(rule_bat);#289 (_472:lng, _473:str, _474:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ296}
    _476 := mtime.compute(_474,1);      #290 _476:date := MTIMEcompute_rule_foryear(_474:zrule, _170:int) 
    bat.insert(_469,_473,_476);         #291 _477:void := BKCinsert_bun(_469:bat[:str,:date], _473:str, _476:date) 
    redo (_472,_473,_474):= bat.hasMoreElements(rule_bat);#292 (_472:lng, _473:str, _474:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ290}
catch MALException:str ;                #293 MALException:str {J295}
    redo (_472,_473,_474):= bat.hasMoreElements(rule_bat);#294 (_472:lng, _473:str, _474:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ290}
exit MALException:str ;                 #295 MALException:str 
exit (_472,_473,_474);                  #296 (_472:lng, _473:str, _474:zrule) 
    yb_a:bat[:str,:date]  := _469;      #297 yb_a:bat[:str,:date] := _469:bat[:str,:date] {G}
    ac_a := bat.setColumn(yb_a,"1");    #298 ac_a:void := BKCsetColumn(yb_a:bat[:str,:date], _172:str) 
#      [compute](rule_bat, 1).bat.setColumn("1"), 
    _483 := bat.new(nil:str,nil:date);  #300 _483:bat[:str,:date] := CMDBATnew(_484:str, _470:date) {G}
barrier (_486,_487,_488):= bat.newIterator(rule_bat);#301 (_486:lng, _487:str, _488:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ308}
    _490 := mtime.compute(_488,1);      #302 _490:date := MTIMEcompute_rule_foryear(_488:zrule, _170:int) 
    bat.insert(_483,_487,_490);         #303 _491:void := BKCinsert_bun(_483:bat[:str,:date], _487:str, _490:date) 
    redo (_486,_487,_488):= bat.hasMoreElements(rule_bat);#304 (_486:lng, _487:str, _488:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ302}
catch MALException:str ;                #305 MALException:str {J307}
    redo (_486,_487,_488):= bat.hasMoreElements(rule_bat);#306 (_486:lng, _487:str, _488:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ302}
exit MALException:str ;                 #307 MALException:str 
exit (_486,_487,_488);                  #308 (_486:lng, _487:str, _488:zrule) 
    bc_a:bat[:str,:date]  := _483;      #309 bc_a:bat[:str,:date] := _483:bat[:str,:date] {G}
    _497 := bat.new(nil:str,nil:int);   #310 _497:bat[:str,:int] := CMDBATnew(_484:str, _498:int) {G}
barrier (_500,_501,_502):= bat.newIterator(bc_a);#311 (_500:lng, _501:str, _502:date) := CHPbunIterator(bc_a:bat[:str,:date]) {GJ318}
    _504 := mtime.dayofweek(_502);      #312 _504:int := MTIMEdate_extract_dayofweek(_502:date) 
    bat.insert(_497,_501,_504);         #313 _505:void := BKCinsert_bun(_497:bat[:str,:int], _501:str, _504:int) 
    redo (_500,_501,_502):= bat.hasMoreElements(bc_a);#314 (_500:lng, _501:str, _502:date) := CHPbunHasMoreElements(bc_a:bat[:str,:date]) {GJ312}
catch MALException:str ;                #315 MALException:str {J317}
    redo (_500,_501,_502):= bat.hasMoreElements(bc_a);#316 (_500:lng, _501:str, _502:date) := CHPbunHasMoreElements(bc_a:bat[:str,:date]) {GJ312}
exit MALException:str ;                 #317 MALException:str 
exit (_500,_501,_502);                  #318 (_500:lng, _501:str, _502:date) 
    cc_a:bat[:str,:int]  := _497;       #319 cc_a:bat[:str,:int] := _497:bat[:str,:int] {G}
    _511 := bat.new(nil:str,nil:str);   #320 _511:bat[:str,:str] := CMDBATnew(_484:str, _484:str) {G}
barrier (_513,_514,_515):= bat.newIterator(cc_a);#321 (_513:lng, _514:str, _515:int) := CHPbunIterator(cc_a:bat[:str,:int]) {GJ328}
    _517 := mtime.dayname(_515);        #322 _517:str := MTIMEday_to_str(_515:int) {G}
    bat.insert(_511,_514,_517);         #323 _518:void := BKCinsert_bun(_511:bat[:str,:str], _514:str, _517:str) 
    redo (_513,_514,_515):= bat.hasMoreElements(cc_a);#324 (_513:lng, _514:str, _515:int) := CHPbunHasMoreElements(cc_a:bat[:str,:int]) {GJ322}
catch MALException:str ;                #325 MALException:str {J327}
    redo (_513,_514,_515):= bat.hasMoreElements(cc_a);#326 (_513:lng, _514:str, _515:int) := CHPbunHasMoreElements(cc_a:bat[:str,:int]) {GJ322}
exit MALException:str ;                 #327 MALException:str 
exit (_513,_514,_515);                  #328 (_513:lng, _514:str, _515:int) 
    dc_a:bat[:str,:str]  := _511;       #329 dc_a:bat[:str,:str] := _511:bat[:str,:str] {G}
    ec_a := bat.setColumn(dc_a,"1");    #330 ec_a:void := BKCsetColumn(dc_a:bat[:str,:str], _172:str) 
#      [dayname]([dayofweek]([compute](rule_bat, 1))).bat.setColumn("1"), 
    _524 := bat.new(nil:str,nil:date);  #332 _524:bat[:str,:date] := CMDBATnew(_525:str, _526:date) {G}
barrier (_528,_529,_530):= bat.newIterator(rule_bat);#333 (_528:lng, _529:str, _530:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ340}
    _532 := mtime.compute(_530,-2000);  #334 _532:date := MTIMEcompute_rule_foryear(_530:zrule, _180:int) 
    bat.insert(_524,_529,_532);         #335 _533:void := BKCinsert_bun(_524:bat[:str,:date], _529:str, _532:date) 
    redo (_528,_529,_530):= bat.hasMoreElements(rule_bat);#336 (_528:lng, _529:str, _530:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ334}
catch MALException:str ;                #337 MALException:str {J339}
    redo (_528,_529,_530):= bat.hasMoreElements(rule_bat);#338 (_528:lng, _529:str, _530:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ334}
exit MALException:str ;                 #339 MALException:str 
exit (_528,_529,_530);                  #340 (_528:lng, _529:str, _530:zrule) 
    fc_a:bat[:str,:date]  := _524;      #341 fc_a:bat[:str,:date] := _524:bat[:str,:date] {G}
    gc_a := bat.setColumn(fc_a,"-2000");#342 gc_a:void := BKCsetColumn(fc_a:bat[:str,:date], _182:str) 
#      [compute](rule_bat, -2000).bat.setColumn("-2000"), 
    _539 := bat.new(nil:str,nil:date);  #344 _539:bat[:str,:date] := CMDBATnew(_525:str, _526:date) {G}
barrier (_541,_542,_543):= bat.newIterator(rule_bat);#345 (_541:lng, _542:str, _543:zrule) := CHPbunIterator(rule_bat:bat[:str,:zrule]) {GJ352}
    _545 := mtime.compute(_543,-2000);  #346 _545:date := MTIMEcompute_rule_foryear(_543:zrule, _180:int) 
    bat.insert(_539,_542,_545);         #347 _546:void := BKCinsert_bun(_539:bat[:str,:date], _542:str, _545:date) 
    redo (_541,_542,_543):= bat.hasMoreElements(rule_bat);#348 (_541:lng, _542:str, _543:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ346}
catch MALException:str ;                #349 MALException:str {J351}
    redo (_541,_542,_543):= bat.hasMoreElements(rule_bat);#350 (_541:lng, _542:str, _543:zrule) := CHPbunHasMoreElements(rule_bat:bat[:str,:zrule]) {GJ346}
exit MALException:str ;                 #351 MALException:str 
exit (_541,_542,_543);                  #352 (_541:lng, _542:str, _543:zrule) 
    hc_a:bat[:str,:date]  := _539;      #353 hc_a:bat[:str,:date] := _539:bat[:str,:date] {G}
    _552 := bat.new(nil:str,nil:int);   #354 _552:bat[:str,:int] := CMDBATnew(_525:str, _553:int) {G}
barrier (_555,_556,_557):= bat.newIterator(hc_a);#355 (_555:lng, _556:str, _557:date) := CHPbunIterator(hc_a:bat[:str,:date]) {GJ362}
    _559 := mtime.dayofweek(_557);      #356 _559:int := MTIMEdate_extract_dayofweek(_557:date) 
    bat.insert(_552,_556,_559);         #357 _560:void := BKCinsert_bun(_552:bat[:str,:int], _556:str, _559:int) 
    redo (_555,_556,_557):= bat.hasMoreElements(hc_a);#358 (_555:lng, _556:str, _557:date) := CHPbunHasMoreElements(hc_a:bat[:str,:date]) {GJ356}
catch MALException:str ;                #359 MALException:str {J361}
    redo (_555,_556,_557):= bat.hasMoreElements(hc_a);#360 (_555:lng, _556:str, _557:date) := CHPbunHasMoreElements(hc_a:bat[:str,:date]) {GJ356}
exit MALException:str ;                 #361 MALException:str 
exit (_555,_556,_557);                  #362 (_555:lng, _556:str, _557:date) 
    ic_a:bat[:str,:int]  := _552;       #363 ic_a:bat[:str,:int] := _552:bat[:str,:int] {G}
    _566 := bat.new(nil:str,nil:str);   #364 _566:bat[:str,:str] := CMDBATnew(_567:str, _567:str) {G}
barrier (_569,_570,_571):= bat.newIterator(ic_a);#365 (_569:lng, _570:str, _571:int) := CHPbunIterator(ic_a:bat[:str,:int]) {GJ372}
    _573 := mtime.dayname(_571);        #366 _573:str := MTIMEday_to_str(_571:int) {G}
    bat.insert(_566,_570,_573);         #367 _574:void := BKCinsert_bun(_566:bat[:str,:str], _570:str, _573:str) 
    redo (_569,_570,_571):= bat.hasMoreElements(ic_a);#368 (_569:lng, _570:str, _571:int) := CHPbunHasMoreElements(ic_a:bat[:str,:int]) {GJ366}
catch MALException:str ;                #369 MALException:str {J371}
    redo (_569,_570,_571):= bat.hasMoreElements(ic_a);#370 (_569:lng, _570:str, _571:int) := CHPbunHasMoreElements(ic_a:bat[:str,:int]) {GJ366}
exit MALException:str ;                 #371 MALException:str 
exit (_569,_570,_571);                  #372 (_569:lng, _570:str, _571:int) 
    jc_a:bat[:str,:str]  := _566;       #373 jc_a:bat[:str,:str] := _566:bat[:str,:str] {G}
    kc_a := bat.setColumn(jc_a,"-2000");#374 kc_a:void := BKCsetColumn(jc_a:bat[:str,:str], _182:str) 
    io.print("rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a");#375 _188:void := IOprint_val(_189:str) 
    lc_a := io.print(rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a);#376 lc_a:void := IOtable(rule_bat:bat[:str,:zrule], sb_a:bat[:str,:date], wb_a:bat[:str,:str], yb_a:bat[:str,:date], dc_a:bat[:str,:str], fc_a:bat[:str,:date], jc_a:bat[:str,:str]) 
#      [dayname]([dayofweek]([compute](rule_bat, -2000))).bat.setColumn("-2000")); 
end main;                               #378  
[ "rule_bat,na_a,pa_a,ra_a,ta_a" ]
#---------------------------------------------------------------------------------------------------------#
# h	rule						month	weekday		day	minutes		  # name
# str	zrule						int	int		int	int		  # type
#---------------------------------------------------------------------------------------------------------#
[ "jan",  first monday from start of january@01:15,	  1,	  2,		  1,	  75		  ]
[ "feb",  nil,						  nil,	  nil,		  nil,	  nil		  ]
[ "mar",  first wednesday on or after march 10@01:15,	  3,	  -4,		  10,	  75		  ]
[ "apr",  last thursday on or before april 1@01:15,	  4,	  -5,		  -1,	  75		  ]
[ "may",  may 26@01:15,					  5,	  0,		  26,	  75		  ]
[ "jun",  second tuesday from end of june@01:15,	  6,	  3,		  -2,	  75		  ]
[ "jul",  first sunday from start of july@01:15,	  7,	  1,		  1,	  75		  ]
[ "aug",  first sunday from end of august@01:15,	  8,	  1,		  -1,	  75		  ]
[ "sep",  10th tuesday from end of september@01:15,	  9,	  3,		  -10,	  75		  ]
[ "oct",  october 31@01:15,				  10,	  0,		  31,	  75		  ]
[ "nov",  last wednesday on or before november 10@01:15,  11,	  -4,		  -10,	  75		  ]
[ "dec",  nil,						  nil,	  nil,		  nil,	  nil		  ]
[ "rule_bat,xa_a,cb_a,eb_a,ib_a,kb_a,ob_a" ]
#---------------------------------------------------------------------------------------------------------------------------------------------------------#
# лллл;	rule						2001		2001		1999		1999		1992		1992		  # name
# str	zrule						date		str		date		str		date		str		  # type
#---------------------------------------------------------------------------------------------------------------------------------------------------------#
[ "jan",  first monday from start of january@01:15,	  2001-01-01,	  "monday",	  1999-01-04,	  "monday",	  1992-01-06,	  "monday"	  ]
[ "feb",  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "mar",  first wednesday on or after march 10@01:15,	  2001-03-14,	  "wednesday",	  1999-03-10,	  "wednesday",	  1992-03-11,	  "wednesday"	  ]
[ "apr",  last thursday on or before april 1@01:15,	  2001-03-29,	  "thursday",	  1999-04-01,	  "thursday",	  1992-03-26,	  "thursday"	  ]
[ "may",  may 26@01:15,					  2001-05-26,	  "saturday",	  1999-05-26,	  "wednesday",	  1992-05-26,	  "tuesday"	  ]
[ "jun",  second tuesday from end of june@01:15,	  2001-06-19,	  "tuesday",	  1999-06-22,	  "tuesday",	  1992-06-23,	  "tuesday"	  ]
[ "jul",  first sunday from start of july@01:15,	  2001-07-01,	  "sunday",	  1999-07-04,	  "sunday",	  1992-07-05,	  "sunday"	  ]
[ "aug",  first sunday from end of august@01:15,	  2001-08-26,	  "sunday",	  1999-08-29,	  "sunday",	  1992-08-30,	  "sunday"	  ]
[ "sep",  10th tuesday from end of september@01:15,	  2001-07-24,	  "tuesday",	  1999-07-27,	  "tuesday",	  1992-07-28,	  "tuesday"	  ]
[ "oct",  october 31@01:15,				  2001-10-31,	  "wednesday",	  1999-10-31,	  "sunday",	  1992-10-31,	  "saturday"	  ]
[ "nov",  last wednesday on or before november 10@01:15,  2001-11-07,	  "wednesday",	  1999-11-10,	  "wednesday",	  1992-11-04,	  "wednesday"	  ]
[ "dec",  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "rule_bat,sb_a,wb_a,yb_a,dc_a,fc_a,jc_a" ]
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
# лллллллллллллллл!	rule						1572		1572		1		1		-2000		-2000		  # name
# str			zrule						date		str		date		str		date		str		  # type
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------#
[ "jan",		  first monday from start of january@01:15,	  1572-01-03,	  "monday",	  1-01-01,	  "monday",	  -2000-01-01,	  "monday"	  ]
[ "feb",		  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]
[ "mar",		  first wednesday on or after march 10@01:15,	  1572-03-15,	  "wednesday",	  1-03-14,	  "wednesday",	  -2000-03-14,	  "wednesday"	  ]
[ "apr",		  last thursday on or before april 1@01:15,	  1572-03-30,	  "thursday",	  1-03-29,	  "thursday",	  -2000-03-29,	  "thursday"	  ]
[ "may",		  may 26@01:15,					  1572-05-26,	  "friday",	  1-05-26,	  "saturday",	  -2000-05-26,	  "saturday"	  ]
[ "jun",		  second tuesday from end of june@01:15,	  1572-06-20,	  "tuesday",	  1-06-19,	  "tuesday",	  -2000-06-19,	  "tuesday"	  ]
[ "jul",		  first sunday from start of july@01:15,	  1572-07-02,	  "sunday",	  1-07-01,	  "sunday",	  -2000-07-01,	  "sunday"	  ]
[ "aug",		  first sunday from end of august@01:15,	  1572-08-27,	  "sunday",	  1-08-26,	  "sunday",	  -2000-08-26,	  "sunday"	  ]
[ "sep",		  10th tuesday from end of september@01:15,	  1572-07-25,	  "tuesday",	  1-07-24,	  "tuesday",	  -2000-07-24,	  "tuesday"	  ]
[ "oct",		  october 31@01:15,				  1572-10-31,	  "tuesday",	  1-10-31,	  "wednesday",	  -2000-10-31,	  "wednesday"	  ]
[ "nov",		  last wednesday on or before november 10@01:15,  1572-11-08,	  "wednesday",	  1-11-07,	  "wednesday",	  -2000-11-07,	  "wednesday"	  ]
[ "dec",		  nil,						  nil,		  nil,		  nil,		  nil,		  nil,		  nil		  ]

# 23:31:29 >  
# 23:31:29 >  Done.
# 23:31:29 >  

