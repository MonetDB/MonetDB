stdout of test 'bat_insert` in directory 'src/gdk` itself:


# 16:38:54 >  
# 16:38:54 >  Mtimeout -timeout 60 Mserver --config=/ufs/niels/data/monet/Linux/etc/monet.conf --debug=10   --set monet_prompt= --dbname=Tests_src_gdk  < bat_insert.milM
# 16:38:54 >  

# Monet Database Server V4.3.5
# Copyright (c) 1993-2002, CWI. All rights reserved.
# compiled for i686-pc-linux-gnu/32bit; dynamically linked.
PROC check_cap(BAT _b) : void {
	VAR inserted := count(_b);
	VAR deleted := count(delta(_b));
	VAR cap := capacity(_b);
	VAR overflow := (inserted + deleted) - cap;
	IF (overflow > lng(0)) {
		printf("!ERROR: wrote %d BUNs beyond capacity\n",overflow);
	}
}

VAR b := new(oid,oid);
b.rename("b");
b.persists(true);

VAR cap := int(capacity(b) / 4) + 1;

VAR i := cap * 3;
WHILE (i > 0) {
	b.insert(oid(i),oid(i));
	i := i - 1;
}

commit();

i := cap * 2;
WHILE (i > 0) {
        b.delete(oid(i));
        i := i - 1;
}

VAR c := new(oid,oid);
i := cap * 2;
WHILE (i > 0) {
	c.insert(oid(i),oid(i));
	i := i - 1;
}

b := b.insert(c);
check_cap(b);

b.persists(false);

commit();

quit();

# 17:04:44 >  
# 17:04:44 >  Done.
# 17:04:44 >  

