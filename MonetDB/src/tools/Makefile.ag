
MTSAFE
INCLUDES = ../gdk ../monet

GDK_LIBS = $(THREAD_LIBS) $(MALLOC_LIBS)
MONET_LIBS = $(SOCKET_LIBS) $(DL_LIBS) $(GDK_LIBS)
MAPI_LIBS = $(SOCKET_LIBS) $(GDK_LIBS)

STATIC_MODS = \
	../modules/plain/lib_kernel ../modules/plain/lib_arith \
	../modules/plain/lib_bat ../modules/plain/lib_algebra \
	../modules/plain/lib_sys ../modules/plain/lib_trans \
	../modules/plain/lib_str

EXTRA_DIST = static_modules.mx

lib_Mapi = {
	SOURCES = Mapi.mx
}

bin_Mserver = {
	SOURCES = Mserver.mx initmodules.mx
	LIBS = ../monet/libmonet STATIC_MODS ../gdk/libbat $(MONET_LIBS)
}

bin_Mload = {
	SOURCES = Mload.mx initmodules.mx
	LIBS = ../monet/libmonet STATIC_MODS ../gdk/libbat $(MONET_LIBS)
}

bin_Mdestroydb = bin_Mcreatedb
bin_Mcreatedb = {
	SOURCES = Mcreatedb.mx
}

BINS = {
	SOURCES = Mdump.mx Mshutdown.mx Mrecover.mx Mcgi.mx Mclient.mx
	LIBS = libMapi ../gdk/libbat $(MAPI_LIBS)
	Mclient_LIBS = $(READLINE_LIBS) $(SOCKET_LIBS)
}
