stdout of test 'test_05` in directory 'tests/suite_00` itself:

#> Mtest:	milS test_05 milS
#> Mtest:	Mtimeout -timeout 210 Mserver -modulesilent -yaccsilent -d8 -db tests_suite_00 -single test_05.milS
# Monet Database Server V4.1
# Copyright (c) 1993-1999, CWI & SION. All rights reserved.
# compiled for IRIX646.5/32bit on Fri Jan 14 01:04:33 MET 2000.
#script:test_05.milS

loaded;
#---------------------------------#
# module	| usage_count	  #
#---------------------------------#
[ "algebra",	  1		  ]
[ "arith",	  1		  ]
[ "bat",	  1		  ]
[ "kernel",	  1		  ]
[ "str",	  1		  ]
[ "sys",	  1		  ]
[ "trans",	  1		  ]

Try: modules;                - for other modules.
     ls;                     - for persistent bat listing.
     sigs("<module>")        - for available commands per module.
     help("<command>")       - for help one-liner for a command.

#You are system administrator (adm)!
setoid(oid(20000000));
#test basic functionality of the BAT library.
#focussed on float
#it includes insertions,deletions,selections, and joins.

print(3.147);
[ 3.147 ]

b:= new(flt,flt);
b.insert(1.2, 15.6);
b.insert(2.3, 4.5);
b.insert(3.0, flt(nil));
b.insert(4.5, 16.7);
b.insert(5.6, 25.6);
b.insert(6.6, 36.7);
b.insert(7.8, 49.0);
b.insert(8.9, 64.5);
b.insert(9.0, flt(nil));
b.insert(flt(nil),flt(nil));
b.insert(flt(nil),81.2);
b.print;
#-----------------#
# BAT:	  tmp_25  #
# (flt)	  (flt)	  #
#-----------------#
[ 1.2,	  15.6	  ]
[ 2.3,	  4.5	  ]
[ 3,	  nil	  ]
[ 4.5,	  16.7	  ]
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]
[ 9,	  nil	  ]
[ nil,	  nil	  ]
[ nil,	  81.2	  ]


# Testing simple retrievals
b.find(1.2).print;
[ 15.6 ]
b.find(4.5).print;
[ 16.7 ]
b.find(flt(nil)).print;
[ 81.2 ]
# This should cause an error
b.find(10.1).print;
!ERROR: CMDfind: value not found.
!ERROR: CMDfind: operation failed.
!ERROR: print(param 1): evaluation error.

# Can we delete them and re-insert them later on
b.delete(4.5, 16.7);
b.delete(1.2, 15.6);
b.delete(flt(nil),81.2);
b.print;
#-----------------#
# BAT:	  tmp_25  #
# (flt)	  (flt)	  #
#-----------------#
[ nil,	  nil	  ]
[ 2.3,	  4.5	  ]
[ 3,	  nil	  ]
[ 9,	  nil	  ]
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]

b.insert(4.5, 16.7);
b.insert(1.2, 15.6);
b.insert(flt(nil),81.2);
b.count.print;
[ 11 ]

# Lets cut out a few sections
b.select(25.6,64.5).print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]
b.select(4.5,15.6).print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  4.5	  ]
[ 1.2,	  15.6	  ]
b.select(4.5,4.5).print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  4.5	  ]
# This should cause an error
b.select(4.5,3.4).print;
!ERROR: BATselect: illegal range.
!ERROR: CMDselect: operation failed.
!ERROR: print(param 1): evaluation error.
b.select(81.2,flt(nil)).print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ nil,	  81.2	  ]
b.select(flt(nil),flt(nil)).print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  4.5	  ]
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]
[ 4.5,	  16.7	  ]
[ 1.2,	  15.6	  ]
[ nil,	  81.2	  ]

# A 2-dimensional cut
bn:=b.fragment(1.2,5.6,4.5,15.6);bn.print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  4.5	  ]
[ 1.2,	  15.6	  ]
b.fragment(1.2,5.6,16.2,flt(nil)).print;
#-----------------#
# BAT:	  tmp_27  #
# (flt)	  (flt)	  #
#-----------------#
[ 5.6,	  25.6	  ]
[ 4.5,	  16.7	  ]
b.fragment(1.2,flt(nil),16.2,flt(nil)).print;
#-----------------#
# BAT:	  tmp_27  #
# (flt)	  (flt)	  #
#-----------------#
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]
[ 4.5,	  16.7	  ]
b.fragment(flt(nil),flt(nil),16.2,flt(nil)).print;
#-----------------#
# BAT:	  tmp_27  #
# (flt)	  (flt)	  #
#-----------------#
[ 5.6,	  25.6	  ]
[ 6.6,	  36.7	  ]
[ 7.8,	  49	  ]
[ 8.9,	  64.5	  ]
[ 4.5,	  16.7	  ]
[ nil,	  81.2	  ]

bn:= b.join(bn.reverse);
bn.print;
#-----------------#
# BAT:	  tmp_27  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  2.3	  ]
[ 1.2,	  1.2	  ]

bn:= b.semijoin(bn);
bn.print;
#-----------------#
# BAT:	  tmp_26  #
# (flt)	  (flt)	  #
#-----------------#
[ 2.3,	  4.5	  ]
[ 1.2,	  15.6	  ]

# band join experiment
c:= b.copy;
bandjoin(b,c,4.5,4.5).print;
#-----------------#
# BAT:	  tmp_28  #
# (flt)	  (flt)	  #
#-----------------#
[ nil,	  nil	  ]
[ nil,	  81.2	  ]
[ 2.3,	  4.5	  ]
[ 2.3,	  nil	  ]
[ 2.3,	  nil	  ]
[ 2.3,	  25.6	  ]
[ 2.3,	  36.7	  ]
[ 2.3,	  49	  ]
[ 2.3,	  64.5	  ]
[ 2.3,	  16.7	  ]
[ 2.3,	  15.6	  ]
[ 3,	  nil	  ]
[ 3,	  81.2	  ]
[ 9,	  nil	  ]
[ 9,	  81.2	  ]
quit;
